<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DGtal: Git/Github source code management in DGtal</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DGtal&#160;<span id="projectnumber">0.4.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>Git/Github source code management in <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><dl class="author"><dt><b>Author:</b></dt><dd>David Coeurjolly</dd></dl>
<p>This part of the manual describes how the <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> Git repository is used on github and gives a couple of details on the git system.</p>
<p>Table of contents:</p>
<ol type="1">
<li><a class="el" href="FAQGit.html#sectGIT1">Setting up your account and working copy</a><ol type="a">
<li><a class="el" href="FAQGit.html#subsectGIT11">Create an account on github.com</a></li>
<li><a class="el" href="FAQGit.html#subsectGIT12">Set up git</a></li>
<li><a class="el" href="FAQGit.html#subsectGIT13">Fork DGtal</a></li>
</ol>
</li>
<li><a class="el" href="FAQGit.html#sectGIT3">Normal workflow</a><ol type="a">
<li><a class="el" href="FAQGit.html#subsectGIT31">Set remote repositories and get a local copy</a></li>
<li><a class="el" href="FAQGit.html#subsectGIT32">Edit files and commit in branches</a></li>
</ol>
</li>
<li><a class="el" href="FAQGit.html#sectGITCommands">Useful git commands</a><ol type="a">
<li><a class="el" href="FAQGit.html#ssCom1">git stash</a></li>
<li><a class="el" href="FAQGit.html#ssCom2">git Tracking Branches</a></li>
<li><a class="el" href="FAQGit.html#ssCom3">git Deleting a remote Branch</a></li>
</ol>
</li>
<li><a class="el" href="FAQGit.html#sectGIT2">Basic comparison SVN/GIT</a><ol type="a">
<li><a class="el" href="FAQGit.html#ss21">Clone == Checkout</a></li>
<li><a class="el" href="FAQGit.html#ss22">Update, Edit, add, commit, push</a></li>
</ol>
</li>
</ol>
<ol type="1">
<li><a class="el" href="FAQGit.html#sectGIT5">Resolving GIT conflict (uncommon)</a></li>
</ol>
<h2><a class="anchor" id="sectGIT1"></a>
Setting up your account and working copy</h2>
<h3><a class="anchor" id="subsectGIT11"></a>
Create an account on github.com</h3>
<ul>
<li>go to github.com, then Signup -&gt; Free account for opensource projects.</li>
<li>choose login/password and it's done</li>
<li>once it's ok, you're transferred to your "dashboard" with three options "Set up Git", "Create a Repo", "Fork a Repo" and "Be Social"</li>
<li>Select the first one.</li>
</ul>
<h3><a class="anchor" id="subsectGIT12"></a>
Set up git</h3>
<p>Github documentation is quite straightforward. The goal to to activate your account with a SSH key to be able to "push" changes to github servers. If you do not activate the SSH access, you'll be able to push your edits via the HTTP protocol but we prefer the first variant.</p>
<p>In the meantime, you can also update your account settings (<a href="https://github.com/account">https://github.com/account</a>)</p>
<h3><a class="anchor" id="subsectGIT13"></a>
Fork DGtal</h3>
<p>Before going into details on git and git-commands, let's fork the initial <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> repository. So, once you're logged in on github</p>
<ul>
<li>go to <a href="https://github.com/DGtal-team/DGtal">https://github.com/DGtal-team/DGtal</a></li>
<li>click on the "Fork" button.</li>
<li>once the fork is finished, you'll have your own copy of <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> with the following path: <a href="https://github.com/yourlogin/DGtal">https://github.com/yourlogin/DGtal</a></li>
<li>At this URL, you're able to browse the sources, see the commit log, report issues, view/edit wiki pages,..</li>
</ul>
<h2><a class="anchor" id="sectGIT3"></a>
Normal workflow</h2>
<h3><a class="anchor" id="subsectGIT31"></a>
Set remote repositories and get a local copy</h3>
<p>Once you have fork the initial <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> repository, you can clone your fork to have a local copy of your own (remote) copy of <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a>:</p>
<div class="fragment"><pre class="fragment">git clone git@github.com:yourlogin/DGtal.git
</pre></div><p>In order to easily access to the initial <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> repository, you can set it as a remote repository, called "upstream": </p>
<div class="fragment"><pre class="fragment">git remote add upstream git@github.com:DGtal-team/DGtal.git
</pre></div><p>Git remotes are great because they allows to have multiple pull/push repositories. You can see the list of your remote repositories:</p>
<div class="fragment"><pre class="fragment">git remote
git remote -v
</pre></div><p>At this point, you should have two remote repositories:</p>
<ul>
<li>origin, your own copy of the initial <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> repository.</li>
<li>upstream, the remote repository you have just added containing the initial <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> repository.</li>
</ul>
<p>You can see the state of a remote repository called "remotename" with the command "git remote show":</p>
<div class="fragment"><pre class="fragment">git remote show remotename
</pre></div><p>In the normal workflow, you can pull from the main <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> repository (upstream)...</p>
<div class="fragment"><pre class="fragment">git pull upstream master
</pre></div><p>...but only push to your own copy of <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> (origin).</p>
<div class="fragment"><pre class="fragment">git push origin yourbranch
</pre></div><p>The merge between the two repositories is done by another developper after a pull request. To make a pull request, go to <a href="http://github.com/yourlogin/DGtal,">http://github.com/yourlogin/DGtal,</a> click on "Pull Request". Then, choose the two branches you would like to merge (master in upstream and yourbranch in origin), write your comments and click on "Send Pull Request".</p>
<h3><a class="anchor" id="subsectGIT32"></a>
Edit files and commit in branches</h3>
<p>0- Before starting to work, pull the upstream (you have to be online).</p>
<div class="fragment"><pre class="fragment">git pull upstream master
</pre></div><p>1- By default, you have a main local branch called master. Create a local branch "cool-feature".</p>
<div class="fragment"><pre class="fragment">git branch cool-feature
</pre></div><p>Note that you can see the list of your local branches:</p>
<div class="fragment"><pre class="fragment">git branch
</pre></div><p>Note also that the branch marked with a star is your current local branch. At this point you should see</p>
<div class="fragment"><pre class="fragment"> master
 cool-feature
</pre></div><p>(the '*' indicates your current active branch).</p>
<p>2- Jump onto your new local branch:</p>
<div class="fragment"><pre class="fragment">git checkout cool-feature
</pre></div><p>After taping the command "git branch" you should see now:</p>
<ul>
<li>master</li>
<li>* cool-feature</li>
</ul>
<p>3- Add files, edit files, commit local branch</p>
<div class="fragment"><pre class="fragment">git commit -a -m <span class="stringliteral">&quot;This commit concerns the cool-feature.....&quot;</span>
</pre></div><p>4- Push to your fork (you have to be online)</p>
<div class="fragment"><pre class="fragment">git push origin cool-feature
</pre></div><p>5- If you have to work on another issue (e.g. bug #42), you can create a new local branch "bug42" from your master, jump onto it, commit edits, and push:</p>
<div class="fragment"><pre class="fragment">git checkout master
git branch bug42
git checkout bug42
git commit -a -m <span class="stringliteral">&quot;Bug #42 fixed.....&quot;</span>
git push origin bug42
</pre></div><p>6- Once you have finished to work on an issue, go to <a href="http://github.com/yourlogin/DGtal">http://github.com/yourlogin/DGtal</a> and ask for a "Pull Request"</p>
<p>7- Once the "Pull Request" has been validate and the merge done, you can remove your local branch:</p>
<div class="fragment"><pre class="fragment">git checkout master
git branch -d cool-feature
</pre></div><p>And you can also remove the associated remote branch (because everything should be merged into the "master" of either your fork, or the main <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> master):</p>
<div class="fragment"><pre class="fragment">git push origin :cool-feature
</pre></div><h2><a class="anchor" id="sectGITCommands"></a>
Useful git commands</h2>
<p>In this section, we detail couple of useful git commands.</p>
<h3><a class="anchor" id="ssCom1"></a>
git stash</h3>
<p>Let suppose you have edited some files and that you figure out that these modifications should be in another branch (or you figure out that your are working on the wrong branch). The command </p>
<div class="fragment"><pre class="fragment">git stash
</pre></div><p> will put all your edits (uncommited edits) into a patch stack (and remove them from your working copy). Then, you can create your new local branch and "pop" your edit from the stack to reapply the changes. E.g.: </p>
<div class="fragment"><pre class="fragment">git pull <span class="comment">//up-to-date branch &quot;master&quot;</span>
<span class="comment">//...</span>
<span class="comment">//edits</span>
<span class="comment">//...</span>
<span class="comment">//well... these edits should be in a separate branch!</span>
git stash
git branch newLocalBranch
git checkout newLocalBranch
git stash pop
<span class="comment">//...</span>
<span class="comment">//edits</span>
git commit -a -m <span class="stringliteral">&quot;....&quot;</span> <span class="comment">//commit to new branch</span>
</pre></div><p> To cleanup your stack: "git stash clear" </p>
<dl class="note"><dt><b>Note:</b></dt><dd>In the previous example, it wouldn't have been possible to create/checkout a new branch since your current branch contained uncommited edits.</dd></dl>
<h3><a class="anchor" id="ssCom2"></a>
git Tracking Branches</h3>
<p>Tracking branches are directely associated to a remote branch. On tracked branch you can directely apply push and pull with no other argument. After a clone the resulting origin branch is a tracking branch.</p>
<div class="fragment"><pre class="fragment">git checkout --track aRemote/aBranch
</pre></div><p>Then you will work on the new tracked branch aBranch</p>
<dl class="note"><dt><b>Note:</b></dt><dd>the option --track work only from git version 1.6.2 and later. But you can perform equivalent with the following command: <div class="fragment"><pre class="fragment">git checkout -b [myBranchName] [aRemoteName]/[aBranch]
</pre></div> </dd></dl>
<h3><a class="anchor" id="ssCom3"></a>
git Deleting a remote Branch</h3>
<p>After working on your remote branch you can remove it from your server by using this particular syntax:</p>
<div class="fragment"><pre class="fragment"> git push aRemoteName :theBranchToDelete
</pre></div><h2><a class="anchor" id="sectGIT2"></a>
Basic comparison SVN/GIT</h2>
<h3><a class="anchor" id="ss21"></a>
Clone == Checkout</h3>
<div class="fragment"><pre class="fragment">        svn checkout https:<span class="comment">//liris.cnrs.fr/dgtal/trunk</span>
        &lt;==&gt;
        git clone git@github.com:DGtal-team/DGtal
or
        git clone https:<span class="comment">//DGtal-team@github.com/DGtal-team/DGtal</span>
</pre></div><p> the clone will "clone" the repository with all its branches (default one "master" &lt;==&gt; "trunk" in SVN)</p>
<h3><a class="anchor" id="ss22"></a>
Update, Edit, add, commit, push</h3>
<ul>
<li>Fetch the changes from the server <div class="fragment"><pre class="fragment">        svn update &lt;==&gt; git pull
</pre></div></li>
</ul>
<ul>
<li>add a file into the VC system: <div class="fragment"><pre class="fragment">        svn add file &lt;==&gt; git add file
</pre></div></li>
</ul>
<ul>
<li>See the current status of your working copy <div class="fragment"><pre class="fragment">        svn status &lt;==&gt; git status
</pre></div></li>
</ul>
<ul>
<li>commit locally your changes (git only) <div class="fragment"><pre class="fragment">        git commit (commit the added files)
        git commit -a (commit the added files and the modified files)
</pre></div></li>
</ul>
<ul>
<li>push the modifications to the server (in the git case, you'll push all your local commits) <div class="fragment"><pre class="fragment">        svn commit &lt;==&gt; git push
</pre></div></li>
</ul>
<ul>
<li>create a branch <div class="fragment"><pre class="fragment">        svn copy URL URL (server side branch, you need to be online)
        &lt;==&gt;
        git branch toto (offline local branch)
</pre></div></li>
</ul>
<ul>
<li>Jump to another branch <div class="fragment"><pre class="fragment">        svn <span class="keywordflow">switch</span> URL (server-side branch...)
        &lt;==&gt;    
        git checkout toto (offline branch)
</pre></div></li>
</ul>
<ul>
<li>merge branches <div class="fragment"><pre class="fragment">        svn merge URL (assuming your WC is trunk)
        svn commit...
        &lt;==&gt;
        git checkout master (we go back to the <span class="stringliteral">&quot;trunk&quot;</span>)
        git merge toto (merger toto-&gt;trunk)     
        git commit -a ...
</pre></div></li>
</ul>
<h2><a class="anchor" id="sectGIT5"></a>
Resolving GIT conflict (uncommon)</h2>
<p>Even it is very rare, conflit can appear when you try to apply a pull:</p>
<div class="fragment"><pre class="fragment">&gt;git pull upstream master

remote: Counting objects: 1, done.
remote: Total 1 (delta 0), reused 1 (delta 0)
Unpacking objects: 100% (1/1), done.
From github.com:DGtal-team/DGtal
 branch            master     -&gt; FETCH_HEAD
Auto-merging doc/cellular-topology.dox
CONFLICT (content): Merge conflict in doc/cellular-topology.dox
Auto-merging src/DGtal/topology/KhalimskySpaceND.ih
Automatic merge failed; fix conflicts and then commit the result.
</pre></div><p>To resolve the conflict you just have to apply the command:</p>
<div class="fragment"><pre class="fragment">&gt; git mergetool
</pre></div><p>It will lunch simple tools like opendiff on MacOSX allowing to select the main file. After saving the merged file, you simply have to commit the new change:</p>
<div class="fragment"><pre class="fragment">&gt; git commit -m <span class="stringliteral">&quot;Merging GIT conflict! &quot;</span> -a
&gt; git pull upstream master
</pre></div><p>For further details, there exist plenty of git tutorials on the web. I strongly encourage you to have a look to the progit.org one (<a href="http://progit.org/book/">http://progit.org/book/</a>).</p>
<p>GitRef is also very nice: <a href="http://gitref.org/index.html">http://gitref.org/index.html</a></p>
<p>Important things:</p>
<ul>
<li>git branches are local (but we can publish a branch too)</li>
<li>easy merge</li>
<li>except pull/push, everything else can be done offline (with a consistent history). </li>
</ul>
</div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Sep 27 2011 10:27:08 for DGtal by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
