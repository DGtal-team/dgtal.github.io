<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<title>DGtal: topology/volTrackBoundary.cpp</title>

<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css" />

<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>

</head>
<body>
<div id="top"><!-- do not remove this div! -->


<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  
  
  <td style="padding-left: 0.5em;">
   <div id="projectname">DGtal
   &#160;<span id="projectnumber">0.5.0</span>
   </div>
   
  </td>
  
  
  
 </tr>
 </tbody>
</table>
</div>

<!-- Generated by Doxygen 1.8.0 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">topology/volTrackBoundary.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>In many circumstances, it is better to use the presented graph structure of digital surfaces. For instance it may be used to find the surface just by searching it by adjacencies. This process is called <b>tracking</b>. This is done for you by static method Surfaces::trackBoundary.</p>
<dl class="section see"><dt>See also:</dt><dd><a class="el" href="dgtal_digital_surface.html#dgtal_digsurf_sec2_2">Constructing digital surfaces by tracking</a></dd></dl>
<p>On the lobser.vol volume, <a class="el" href="volTrackBoundary_8cpp_source.html">volTrackBoundary.cpp</a> extracts 148364 surfels in 351ms.</p>
<div class="fragment"><pre class="fragment"># Commands
$ ./examples/topology/volTrackBoundary ../examples/samples/lobster.vol 50 255
</pre></div><div class="image">
<img src="volTrackBoundary-lobster.png" alt="volTrackBoundary-lobster.png"/>
<div class="caption">
Digital surface that is the boundary of a (6,18)-connected component in image lobster.vol, extracted by tracking from an initial surfel in 351ms.</div></div>
 <div class="fragment"><pre class="fragment">


<span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &lt;queue&gt;</span>
<span class="preprocessor">#include &lt;QImageReader&gt;</span>
<span class="preprocessor">#include &lt;QtGui/qapplication.h&gt;</span>
<span class="preprocessor">#include &quot;DGtal/kernel/sets/SetPredicate.h&quot;</span>
<span class="preprocessor">#include &quot;DGtal/io/readers/VolReader.h&quot;</span>
<span class="preprocessor">#include &quot;DGtal/io/viewers/Viewer3D.h&quot;</span>
<span class="preprocessor">#include &quot;DGtal/io/DrawWithDisplay3DModifier.h&quot;</span>
<span class="preprocessor">#include &quot;DGtal/io/Color.h&quot;</span>
<span class="preprocessor">#include &quot;DGtal/images/ImageSelector.h&quot;</span>
<span class="preprocessor">#include &quot;DGtal/images/imagesSetsUtils/SetFromImage.h&quot;</span>
<span class="preprocessor">#include &quot;DGtal/shapes/Shapes.h&quot;</span>
<span class="preprocessor">#include &quot;DGtal/helpers/StdDefs.h&quot;</span>
<span class="preprocessor">#include &quot;DGtal/topology/helpers/Surfaces.h&quot;</span>


<span class="keyword">using namespace </span>std;
<span class="keyword">using namespace </span>DGtal;
<span class="keyword">using namespace </span>Z3i;


<span class="keywordtype">void</span> usage( <span class="keywordtype">int</span> <span class="comment">/*argc*/</span>, <span class="keywordtype">char</span>** argv )
{
  std::cerr &lt;&lt; <span class="stringliteral">&quot;Usage: &quot;</span> &lt;&lt; argv[ 0 ] &lt;&lt; <span class="stringliteral">&quot; &lt;fileName.vol&gt; &lt;minT&gt; &lt;maxT&gt;&quot;</span> &lt;&lt; std::endl;
  std::cerr &lt;&lt; <span class="stringliteral">&quot;\t - displays the boundary of the shape stored in vol file &lt;fileName.vol&gt;.&quot;</span> &lt;&lt; std::endl;
  std::cerr &lt;&lt; <span class="stringliteral">&quot;\t - voxel v belongs to the shape iff its value I(v) follows minT &lt;= I(v) &lt;= maxT.&quot;</span> &lt;&lt; std::endl;
}

<span class="keywordtype">int</span> main( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )
{
  <span class="keywordflow">if</span> ( argc &lt; 4 )
    {
      usage( argc, argv );
      <span class="keywordflow">return</span> 1;
    }
  std::string inputFilename = argv[ 1 ];
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> minThreshold = atoi( argv[ 2 ] );
  <span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> maxThreshold = atoi( argv[ 3 ] );

  <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a name="a0"></a><a class="code" href="classDGtal_1_1Trace.html#a352b7160bf722e2f0bcbee5d0bad6ef3">beginBlock</a>( <span class="stringliteral">&quot;Reading vol file into an image.&quot;</span> );
  <span class="keyword">typedef</span> <a name="_a1"></a><a class="code" href="classDGtal_1_1ImageContainerBySTLVector.html">ImageSelector &lt; Domain, int&gt;::Type</a> <a name="_a2"></a><a class="code" href="classDGtal_1_1Image.html" title="Aim: implements association bewteen points lying in a digital domain and values.">Image</a>;
  Image image = <a name="_a3"></a><a class="code" href="structDGtal_1_1VolReader.html" title="Aim: implements methods to read a &quot;Vol&quot; file format.">VolReader&lt;Image&gt;::importVol</a>(inputFilename);
  <a class="code" href="namespaceDGtal_1_1Z2i.html#a371252c324e496cf8650757c1a2b4eb0">DigitalSet</a> set3d (image.<a name="a4"></a><a class="code" href="classDGtal_1_1Image.html#a28a1c55de323d0d0ec62d2db03eaf180">domain</a>());
  <a name="_a5"></a><a class="code" href="structDGtal_1_1SetPredicate.html">SetPredicate&lt;DigitalSet&gt;</a> set3dPredicate( set3d );
  <a name="_a6"></a><a class="code" href="structDGtal_1_1SetFromImage.html" title="Aim: Define utilities to convert a digital set into an image.">SetFromImage&lt;DigitalSet&gt;::append</a>&lt;Image&gt;(set3d, image, 
                                          minThreshold, maxThreshold);
  <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a name="a7"></a><a class="code" href="classDGtal_1_1Trace.html#a6c28382776be9139655b4851fabe4dda">endBlock</a>();
  
  
  <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a352b7160bf722e2f0bcbee5d0bad6ef3">beginBlock</a>( <span class="stringliteral">&quot;Construct the Khalimsky space from the image domain.&quot;</span> );
  <a class="code" href="namespaceDGtal_1_1Z2i.html#a6183d00ec6f8c4f81748fd20a52e5590">KSpace</a> ks;
  <span class="keywordtype">bool</span> space_ok = ks.init( image.domain().lowerBound(), 
                           image.domain().upperBound(), true );
  <span class="keywordflow">if</span> (!space_ok)
    {
      <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a name="a8"></a><a class="code" href="classDGtal_1_1Trace.html#a330cf110a400dbffd45c8b8e335237c1">error</a>() &lt;&lt; <span class="stringliteral">&quot;Error in the Khamisky space construction.&quot;</span>&lt;&lt;std::endl;
      <span class="keywordflow">return</span> 2;
    }
  <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a6c28382776be9139655b4851fabe4dda">endBlock</a>();

  <span class="keyword">typedef</span> <a name="_a9"></a><a class="code" href="classDGtal_1_1SurfelAdjacency.html">SurfelAdjacency&lt;KSpace::dimension&gt;</a> MySurfelAdjacency;
  MySurfelAdjacency surfAdj( <span class="keyword">true</span> ); <span class="comment">// interior in all directions.</span>
<span class="comment"></span>
  <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a352b7160bf722e2f0bcbee5d0bad6ef3">beginBlock</a>( <span class="stringliteral">&quot;Extracting boundary by tracking from an initial bel.&quot;</span> );
  KSpace::SCellSet boundary;
  <a class="code" href="namespaceDGtal_1_1Z2i.html#ada8961626acc7fab62a96bf22bc74281">SCell</a> bel = <a name="_a10"></a><a class="code" href="classDGtal_1_1Surfaces.html" title="Aim: A utility class for constructing surfaces (i.e. set of (n-1)-cells).">Surfaces&lt;KSpace&gt;::findABel</a>( ks, set3dPredicate, 100000 );
  <a class="code" href="classDGtal_1_1Surfaces.html" title="Aim: A utility class for constructing surfaces (i.e. set of (n-1)-cells).">Surfaces&lt;KSpace&gt;::trackBoundary</a>( boundary, ks, 
                                   surfAdj,
                                   set3dPredicate, bel );
  <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a6c28382776be9139655b4851fabe4dda">endBlock</a>();

  <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a352b7160bf722e2f0bcbee5d0bad6ef3">beginBlock</a>( <span class="stringliteral">&quot;Displaying surface in Viewer3D.&quot;</span> );
  QApplication application(argc,argv);
  <a name="_a11"></a><a class="code" href="classDGtal_1_1Viewer3D.html" title="Aim: Display 3D primitive (like PointVector, DigitalSetBySTLSet, Object ...). This class uses the lib...">Viewer3D</a> viewer;
  viewer.show(); 
  viewer &lt;&lt; <a name="_a12"></a><a class="code" href="structDGtal_1_1CustomColors3D.html" title="Custom style class redefining the fill color and the gl_LINE/gl_POINT color. You can use DGtal::Color...">CustomColors3D</a>(<a name="_a13"></a><a class="code" href="classDGtal_1_1Color.html" title="Structure representing an RGB triple.">Color</a>(250, 0, 0 ), <a class="code" href="classDGtal_1_1Color.html" title="Structure representing an RGB triple.">Color</a>( 128, 128, 128 ) );
  <span class="keywordtype">unsigned</span> <span class="keywordtype">long</span> nbSurfels = 0;
  <span class="keywordflow">for</span> ( KSpace::SCellSet::const_iterator it = boundary.begin(),
          it_end = boundary.end(); it != it_end; ++it, ++nbSurfels )
    viewer &lt;&lt; *it;
  viewer &lt;&lt; Viewer3D::updateDisplay;
  <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a name="a14"></a><a class="code" href="classDGtal_1_1Trace.html#a33ae7cd58d47594cee54640946c6b859">info</a>() &lt;&lt; <span class="stringliteral">&quot;nb surfels = &quot;</span> &lt;&lt; nbSurfels &lt;&lt; std::endl;
  <a class="code" href="namespaceDGtal.html#a604c07ec391ad12a1f3fb6479993f112">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a6c28382776be9139655b4851fabe4dda">endBlock</a>();
  <span class="keywordflow">return</span> application.exec();
}

</pre></div> </div><!-- contents -->


<hr class="footer"/><address class="footer"><small>
Generated on Thu May 10 2012 16:08:51 for DGtal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.0
</small></address>

</body>
</html>
