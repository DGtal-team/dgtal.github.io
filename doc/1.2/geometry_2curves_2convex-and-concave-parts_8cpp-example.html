<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DGtal: geometry/curves/convex-and-concave-parts.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="modern-doxygen-blue.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DGtal
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">geometry/curves/convex-and-concave-parts.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example outputs the cover of an open digital curve by maximal DSSs. Maximal DSSs are displayed in blue, green, yellow in convex, concave, inflexion parts respectively. Ends are black. Convex (resp. concave) parts are defined as sequences of maximal DSSs of increasing (resp. decreasing) slope.</p>
<pre class="fragment">$ ./examples/geometry/curves/convex-and-concave-parts
</pre><p>Note that the chain code of the input digital curve may be passed as argument as follows: </p><pre class="fragment">$ ./examples/geometry/curves/convex-and-concave-parts 0300303303033030303000010101011010110100000303303033030303
</pre><div class="image">
<img src="convex-and-concave-parts.png" alt=""/>
<div class="caption">
Decomposition into convex and concave parts</div></div>
 <dl class="section see"><dt>See also</dt><dd><a class="el" href="moduleArithDSSReco.html">Digital straight lines and segments <br  />
</a> and <a class="el" href="moduleGridCurveAnalysis.html">Analysis of one-dimensional discrete structures</a></dd></dl>
<div class="fragment"><div class="line"> </div>
<div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/base/Common.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/io/boards/Board2D.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/io/Color.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/shapes/Shapes.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/helpers/StdDefs.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/geometry/curves/ArithmeticalDSSComputer.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/geometry/curves/FreemanChain.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;DGtal/geometry/curves/SaturatedSegmentation.h&quot;</span></div>
<div class="line"><span class="preprocessor">#include &quot;ConfigExamples.h&quot;</span></div>
<div class="line"> </div>
<div class="line"><span class="keyword">using namespace </span>std;</div>
<div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceDGtal.html">DGtal</a>;</div>
<div class="line"><span class="keyword">using namespace </span>Z2i;</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator, <span class="keyword">typename</span> Board&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a name="a0"></a><a class="code" href="testSegmentation_8cpp.html#a6db8c21a056713ded5140aa28c9711ff">drawCCP</a>(<span class="keyword">const</span> Iterator&amp; itb, <span class="keyword">const</span> Iterator&amp; ite, Board&amp; aBoard)</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//choose the drawing mode</span></div>
<div class="line">  aBoard &lt;&lt; SetMode( <span class="stringliteral">&quot;ArithmeticalDSS&quot;</span>, <span class="stringliteral">&quot;BoundingBox&quot;</span> );</div>
<div class="line">  <span class="comment">//prepare the drawing style and the pen color</span></div>
<div class="line">  <span class="keywordtype">string</span> aStyleName = <span class="stringliteral">&quot;ArithmeticalDSS/BoundingBox&quot;</span>;</div>
<div class="line">  CustomPenColor* aPenColor;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//for each maximal segment</span></div>
<div class="line">  <span class="keywordflow">for</span> (Iterator i(itb); i != ite; ++i) {</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//get the current maximal segment</span></div>
<div class="line">    <span class="keyword">typedef</span> <span class="keyword">typename</span> Iterator::SegmentComputer::Primitive DSS;</div>
<div class="line">    DSS maximalDSS = i-&gt;primitive();</div>
<div class="line"> </div>
<div class="line">    <span class="comment">//if located at the end of a connected part</span></div>
<div class="line">    <span class="keywordflow">if</span> ( !(i.intersectNext() &amp;&amp; i.intersectPrevious()) ) {</div>
<div class="line"> </div>
<div class="line">      aPenColor = <span class="keyword">new</span> CustomPenColor( Color::Black );</div>
<div class="line"> </div>
<div class="line">      <span class="comment">//otherwise</span></div>
<div class="line">    } <span class="keywordflow">else</span> {</div>
<div class="line"> </div>
<div class="line">      <span class="comment">//get the points located before and after the maximal segment</span></div>
<div class="line">      <span class="keyword">typedef</span> <span class="keyword">typename</span> <a name="a1"></a><a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">DSS::Point</a> <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a>;</div>
<div class="line">      <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a> beforeFirst = *(--(i-&gt;begin()));</div>
<div class="line">      <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a> afterLast = *(i-&gt;end());</div>
<div class="line"> </div>
<div class="line">      <span class="comment">//remainders and bounds</span></div>
<div class="line">      <span class="keyword">typedef</span> <span class="keyword">typename</span> <a name="a2"></a><a class="code" href="examplePlaneProbingParallelepipedEstimator_8cpp.html#ad31c3eca44cf6770809bc47f2b456212">DSS::Integer</a> <a class="code" href="examplePlaneProbingParallelepipedEstimator_8cpp.html#ad31c3eca44cf6770809bc47f2b456212">Integer</a>;</div>
<div class="line">      <a class="code" href="examplePlaneProbingParallelepipedEstimator_8cpp.html#ad31c3eca44cf6770809bc47f2b456212">Integer</a> r1 = maximalDSS.remainder(beforeFirst);</div>
<div class="line">      <a class="code" href="examplePlaneProbingParallelepipedEstimator_8cpp.html#ad31c3eca44cf6770809bc47f2b456212">Integer</a> r2 = maximalDSS.remainder(afterLast);</div>
<div class="line">      <a class="code" href="examplePlaneProbingParallelepipedEstimator_8cpp.html#ad31c3eca44cf6770809bc47f2b456212">Integer</a> mu = maximalDSS.mu();</div>
<div class="line">      <a class="code" href="examplePlaneProbingParallelepipedEstimator_8cpp.html#ad31c3eca44cf6770809bc47f2b456212">Integer</a> omega = maximalDSS.omega();</div>
<div class="line"> </div>
<div class="line">      <span class="comment">//configurations</span></div>
<div class="line">      <span class="keywordflow">if</span> ( (r1&lt;=mu-1)&amp;&amp;(r2&lt;=mu-1) ) {                    <span class="comment">//concave</span></div>
<div class="line">        aPenColor = <span class="keyword">new</span> CustomPenColor( Color::Green);</div>
<div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (r1&gt;=mu+omega)&amp;&amp;(r2&gt;=mu+omega) ) {     <span class="comment">//convex</span></div>
<div class="line">        aPenColor = <span class="keyword">new</span> CustomPenColor( Color::Blue );</div>
<div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (r1&gt;=mu+omega)&amp;&amp;(r2&lt;=mu-1) ) {         <span class="comment">//convex to concave</span></div>
<div class="line">        aPenColor = <span class="keyword">new</span> CustomPenColor( Color::Yellow );</div>
<div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (r1&lt;=mu-1)&amp;&amp;(r2&gt;=mu+omega) ) {         <span class="comment">//concave to convex</span></div>
<div class="line">        aPenColor = <span class="keyword">new</span> CustomPenColor( Color::Yellow );</div>
<div class="line">      } <span class="keywordflow">else</span> {                                           <span class="comment">//pb</span></div>
<div class="line">        aPenColor = <span class="keyword">new</span> CustomPenColor( Color::Red );</div>
<div class="line">      }</div>
<div class="line"> </div>
<div class="line">    }</div>
<div class="line"> </div>
<div class="line">    <span class="comment">// draw the maximal segment on the board</span></div>
<div class="line">    aBoard &lt;&lt; CustomStyle( aStyleName, aPenColor )</div>
<div class="line">           &lt;&lt; maximalDSS;</div>
<div class="line"> </div>
<div class="line">  }</div>
<div class="line"> </div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator, <span class="keyword">typename</span> Board&gt;</div>
<div class="line"><span class="keywordtype">void</span> <a name="a3"></a><a class="code" href="testSegmentation_8cpp.html#a0e45d4c95df5c45509343ccb8559fc03">segmentationIntoMaximalDSSs</a>(<span class="keyword">const</span> Iterator&amp; itb, <span class="keyword">const</span> Iterator&amp; ite,</div>
<div class="line">                                 Board&amp; aBoard)</div>
<div class="line">{</div>
<div class="line">  <span class="keyword">typedef</span> <span class="keyword">typename</span> IteratorCirculatorTraits&lt;Iterator&gt;::Value::Coordinate Coordinate;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//choose the primitive computer and the segmentation</span></div>
<div class="line">  <span class="keyword">typedef</span> ArithmeticalDSSComputer&lt;Iterator,Coordinate,4&gt; RecognitionAlgorithm;</div>
<div class="line">  <span class="keyword">typedef</span> SaturatedSegmentation&lt;RecognitionAlgorithm&gt; <a name="a4"></a><a class="code" href="testArithmeticalDSSComputerOnSurfels_8cpp.html#a96c42548d4922d4ea4da9d0a61b746d2">Segmentation</a>;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//create the segmentation</span></div>
<div class="line">  RecognitionAlgorithm algo;</div>
<div class="line">  <a class="code" href="testArithmeticalDSSComputerOnSurfels_8cpp.html#a96c42548d4922d4ea4da9d0a61b746d2">Segmentation</a> s(itb,ite,algo);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//draw the result</span></div>
<div class="line">  <a class="code" href="testSegmentation_8cpp.html#a6db8c21a056713ded5140aa28c9711ff">drawCCP</a>(s.begin(), s.end(), aBoard);</div>
<div class="line">}</div>
<div class="line"> </div>
<div class="line"> </div>
<div class="line"><span class="keywordtype">int</span> <a name="a5"></a><a class="code" href="testArithmeticDSS-benchmark_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )</div>
<div class="line">{</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a name="a6"></a><a class="code" href="classDGtal_1_1Trace.html#a352b7160bf722e2f0bcbee5d0bad6ef3">beginBlock</a> ( <span class="stringliteral">&quot;Example convex-and-concave-parts&quot;</span> );</div>
<div class="line"> </div>
<div class="line">  Board2D aBoard; <span class="comment">//create a board</span></div>
<div class="line"> </div>
<div class="line">  <span class="comment">//create a chain code</span></div>
<div class="line">  <span class="keywordtype">string</span> codes;</div>
<div class="line">  <span class="keywordflow">if</span> (argc &gt;= 2) codes = argv[1];</div>
<div class="line">  <span class="keywordflow">else</span> codes = <span class="stringliteral">&quot;030030330303303030300001010101101011010000030330303303030300001010110101011010000033&quot;</span>;</div>
<div class="line"> </div>
<div class="line">  stringstream ss(stringstream::in | stringstream::out);</div>
<div class="line">  ss &lt;&lt; <span class="stringliteral">&quot;0 0 &quot;</span> &lt;&lt; codes &lt;&lt; endl;</div>
<div class="line">  FreemanChain&lt;int&gt; theContour( ss );</div>
<div class="line"> </div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a name="a7"></a><a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;Processing of &quot;</span> &lt;&lt; ss.str() &lt;&lt; endl;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//draw the digital contour</span></div>
<div class="line">  aBoard</div>
<div class="line">   &lt;&lt; SetMode( <span class="stringliteral">&quot;PointVector&quot;</span>, <span class="stringliteral">&quot;Grid&quot;</span> )</div>
<div class="line">   &lt;&lt; theContour;</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//draw the maximal segments</span></div>
<div class="line">  <a class="code" href="testSegmentation_8cpp.html#a0e45d4c95df5c45509343ccb8559fc03">segmentationIntoMaximalDSSs</a>(theContour.begin(), theContour.end(), aBoard);</div>
<div class="line"> </div>
<div class="line">  <span class="comment">//save the drawing</span></div>
<div class="line">  aBoard.saveSVG(<span class="stringliteral">&quot;convex-and-concave-parts.svg&quot;</span>);</div>
<div class="line"><span class="preprocessor">  #ifdef WITH_CAIRO</span></div>
<div class="line">    aBoard.saveCairo(<span class="stringliteral">&quot;convex-and-concave-parts.png&quot;</span>); </div>
<div class="line"><span class="preprocessor">  #endif</span></div>
<div class="line"> </div>
<div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a name="a8"></a><a class="code" href="classDGtal_1_1Trace.html#afa3a2874289734884107b1ce68ccb93d">endBlock</a>();</div>
<div class="line"> </div>
<div class="line">  <span class="keywordflow">return</span> 0;</div>
<div class="line">}</div>
<div class="line"><span class="comment">//                                                                           //</span></div>
<div class="ttc" id="aclassDGtal_1_1Trace_html_a352b7160bf722e2f0bcbee5d0bad6ef3"><div class="ttname"><a href="classDGtal_1_1Trace.html#a352b7160bf722e2f0bcbee5d0bad6ef3">DGtal::Trace::beginBlock</a></div><div class="ttdeci">void beginBlock(const std::string &amp;keyword=&quot;&quot;)</div></div>
<div class="ttc" id="aclassDGtal_1_1Trace_html_ad054990834d2763627166540087a2980"><div class="ttname"><a href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">DGtal::Trace::info</a></div><div class="ttdeci">std::ostream &amp; info()</div></div>
<div class="ttc" id="aclassDGtal_1_1Trace_html_afa3a2874289734884107b1ce68ccb93d"><div class="ttname"><a href="classDGtal_1_1Trace.html#afa3a2874289734884107b1ce68ccb93d">DGtal::Trace::endBlock</a></div><div class="ttdeci">double endBlock()</div></div>
<div class="ttc" id="aexamplePlaneProbingParallelepipedEstimator_8cpp_html_ad31c3eca44cf6770809bc47f2b456212"><div class="ttname"><a href="examplePlaneProbingParallelepipedEstimator_8cpp.html#ad31c3eca44cf6770809bc47f2b456212">Integer</a></div><div class="ttdeci">Point::Coordinate Integer</div><div class="ttdef"><b>Definition:</b> <a href="examplePlaneProbingParallelepipedEstimator_8cpp_source.html#l00044">examplePlaneProbingParallelepipedEstimator.cpp:44</a></div></div>
<div class="ttc" id="anamespaceDGtal_html"><div class="ttname"><a href="namespaceDGtal.html">DGtal</a></div><div class="ttdoc">DGtal is the top-level namespace which contains all DGtal functions and types.</div><div class="ttdef"><b>Definition:</b> <a href="ClosedIntegerHalfPlane_8h_source.html#l00048">ClosedIntegerHalfPlane.h:49</a></div></div>
<div class="ttc" id="anamespaceDGtal_html_a8fc7012708b0416880a5c8b12dfdf9dd"><div class="ttname"><a href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">DGtal::trace</a></div><div class="ttdeci">Trace trace</div><div class="ttdef"><b>Definition:</b> <a href="Common_8h_source.html#l00154">Common.h:154</a></div></div>
<div class="ttc" id="atestArithmeticDSS-benchmark_8cpp_html_a3c04138a5bfe5d72780bb7e82a18e627"><div class="ttname"><a href="testArithmeticDSS-benchmark_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a></div><div class="ttdeci">int main(int argc, char **argv)</div><div class="ttdef"><b>Definition:</b> <a href="testArithmeticDSS-benchmark_8cpp_source.html#l00147">testArithmeticDSS-benchmark.cpp:147</a></div></div>
<div class="ttc" id="atestArithmeticalDSSComputerOnSurfels_8cpp_html_a96c42548d4922d4ea4da9d0a61b746d2"><div class="ttname"><a href="testArithmeticalDSSComputerOnSurfels_8cpp.html#a96c42548d4922d4ea4da9d0a61b746d2">Segmentation</a></div><div class="ttdeci">SaturatedSegmentation&lt; SegmentComputer &gt; Segmentation</div><div class="ttdef"><b>Definition:</b> <a href="testArithmeticalDSSComputerOnSurfels_8cpp_source.html#l00056">testArithmeticalDSSComputerOnSurfels.cpp:56</a></div></div>
<div class="ttc" id="atestClone2_8cpp_html_a15e9592ccc512dc691b46185e6814758"><div class="ttname"><a href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a></div><div class="ttdeci">MyPointD Point</div><div class="ttdef"><b>Definition:</b> <a href="testClone2_8cpp_source.html#l00383">testClone2.cpp:383</a></div></div>
<div class="ttc" id="atestSegmentation_8cpp_html_a0e45d4c95df5c45509343ccb8559fc03"><div class="ttname"><a href="testSegmentation_8cpp.html#a0e45d4c95df5c45509343ccb8559fc03">segmentationIntoMaximalDSSs</a></div><div class="ttdeci">void segmentationIntoMaximalDSSs(const Iterator &amp;itb, const Iterator &amp;ite, const Iterator &amp;sitb, const Iterator &amp;site, const string &amp;aMode, Board &amp;aBoard)</div><div class="ttdef"><b>Definition:</b> <a href="testSegmentation_8cpp_source.html#l00175">testSegmentation.cpp:175</a></div></div>
<div class="ttc" id="atestSegmentation_8cpp_html_a6db8c21a056713ded5140aa28c9711ff"><div class="ttname"><a href="testSegmentation_8cpp.html#a6db8c21a056713ded5140aa28c9711ff">drawCCP</a></div><div class="ttdeci">void drawCCP(const Iterator &amp;itb, const Iterator &amp;ite, Board &amp;aBoard)</div><div class="ttdef"><b>Definition:</b> <a href="testSegmentation_8cpp_source.html#l00093">testSegmentation.cpp:93</a></div></div>
</div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Tue Jun 1 2021 17:04:41 for DGtal by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
