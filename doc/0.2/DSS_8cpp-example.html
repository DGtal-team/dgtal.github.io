<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DGtal: DSS.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<!-- Generated by Doxygen 1.7.1 -->
<div class="navigation" id="top">
  <div class="tabs">
    <ul class="tablist">
      <li><a href="main.html"><span>Main&nbsp;Page</span></a></li>
      <li><a href="pages.html"><span>Related&nbsp;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&nbsp;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>DSS.cpp</h1>  </div>
</div>
<div class="contents">
<p>Illustration of DSS recognition and segmentation on a Freeman contour.</p>
<div class="fragment"><pre class="fragment">

<span class="preprocessor">#include &lt;iostream&gt;</span>
<span class="preprocessor">#include &quot;<a class="code" href="Common_8h.html">DGtal/base/Common.h</a>&quot;</span>

<span class="preprocessor">#include &quot;<a class="code" href="ArithmeticalDSS_8h.html">DGtal/geometry/2d/ArithmeticalDSS.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="FreemanChain_8h.html">DGtal/geometry/2d/FreemanChain.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="BasicTypes_8h.html">DGtal/base/BasicTypes.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="GreedyDecomposition_8h.html">DGtal/geometry/2d/GreedyDecomposition.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="DGtalBoard_8h.html">DGtal/io/DGtalBoard.h</a>&quot;</span>
<span class="preprocessor">#include &quot;<a class="code" href="StdDefs_8h.html">DGtal/helpers/StdDefs.h</a>&quot;</span>

<span class="keyword">using namespace </span>std;
<span class="keyword">using namespace </span>DGtal;
<span class="keyword">using namespace </span>Z2i;


<span class="keywordtype">int</span> <a name="a0"></a><a class="code" href="testBasicBoolFunctions_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )
{
  <span class="keyword">typedef</span> <a name="_a1"></a><a class="code" href="classDGtal_1_1FreemanChain.html">FreemanChain&lt;Space::Integer&gt;</a> ContourType; 
  
  <span class="comment">// Construction of a contour defined as a Freeman chain  code</span>
  std::stringstream ss (stringstream::in | stringstream::out);
  ss &lt;&lt; <span class="stringliteral">&quot;0 0 00010010033030&quot;</span> &lt;&lt; endl;
  
  ContourType theContour(ss);
  
  <span class="comment">// Basic tests</span>
  <a name="a2"></a><a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a name="a3"></a><a class="code" href="classDGtal_1_1Trace.html#a269e1bb274603546481b9d0413470bd4">info</a>()&lt;&lt; <span class="stringliteral">&quot;Freeman chain set to &quot;</span> &lt;&lt; theContour.chain &lt;&lt; endl; 
  <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a269e1bb274603546481b9d0413470bd4">info</a>() &lt;&lt; <span class="stringliteral">&quot;isClosed():&quot;</span> &lt;&lt; theContour.isClosed()&lt;&lt; endl;
  
  <span class="comment">// Draw the contour and save the image</span>
  <a name="_a4"></a><a class="code" href="classDGtal_1_1DGtalBoard.html" title="Aim: This class specializes a &amp;#39;Board&amp;#39; class so as to display DGtal objects more naturally (wi...">DGtalBoard</a> board;
  board &lt;&lt; theContour;
  board.<a name="a5"></a><a class="codeRef" href="classLibBoard_1_1Board.html#adab1403965fea54c0de9bfe38e1e6724">saveSVG</a>(<span class="stringliteral">&quot;exampleDSS-1.svg&quot;</span>);
  board.<a name="a6"></a><a class="codeRef" href="classLibBoard_1_1Board.html#a0bb157ee0eb70eb9281634e9ed311818">saveEPS</a>(<span class="stringliteral">&quot;exampleDSS-1.eps&quot;</span>);
  board.<a name="a7"></a><a class="codeRef" href="classLibBoard_1_1Board.html#a9ced63899f213242c335189a4f5b1361">saveFIG</a>(<span class="stringliteral">&quot;exampleDSS-1.fig&quot;</span>);
  
  <span class="comment">// Get and display the list of contour points</span>
  <a name="_a8"></a><a class="code" href="classvector.html">vector&lt;Point&gt;</a> ContourPoints; 
  theContour.getContourPoints(theContour, ContourPoints);
  <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a269e1bb274603546481b9d0413470bd4">info</a>() &lt;&lt; <span class="stringliteral">&quot;List of points: &quot;</span>;
  <span class="keywordflow">for</span> (<span class="keywordtype">unsigned</span> <span class="keywordtype">int</span> i =0; i &lt; ContourPoints.size(); i++){
    <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a269e1bb274603546481b9d0413470bd4">info</a>()&lt;&lt; <span class="stringliteral">&quot;(&quot;</span> &lt;&lt; ContourPoints.at(i).at(0) &lt;&lt; <span class="stringliteral">&quot;,&quot;</span> &lt;&lt; ContourPoints.at(i).at(1) &lt;&lt; <span class="stringliteral">&quot;)&quot;</span>;  
  }
  <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a269e1bb274603546481b9d0413470bd4">info</a>() &lt;&lt; endl;
  
  <span class="comment">// Recognition of a DSS beginning at the first point of the contour</span>
  <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a name="a9"></a><a class="code" href="classDGtal_1_1Trace.html#a352b7160bf722e2f0bcbee5d0bad6ef3">beginBlock</a>(<span class="stringliteral">&quot;Recognition of a DS along the contour&quot;</span>);
  <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a269e1bb274603546481b9d0413470bd4">info</a>() &lt;&lt; <span class="stringliteral">&quot;Initialisation of a DSS with the first two points of the contour&quot;</span> &lt;&lt; endl;
  ContourType::ConstIterator iter = theContour.begin();
  
  <span class="comment">// Initialisation with the first two points</span>
  <a name="_a10"></a><a class="code" href="classDGtal_1_1PointVector.html" title="Aim: Implements basic operations that will be used in Point and Vector classes.">Point</a> a = iter.get(); <span class="comment">//or a = *(iter)</span>
  ++iter;
  <a class="code" href="classDGtal_1_1PointVector.html" title="Aim: Implements basic operations that will be used in Point and Vector classes.">Point</a> b = iter.get(); 
  <a name="a11"></a><a class="code" href="namespaceDGtal_1_1Z2i.html#a78903bfd72845a4de0d67b894aea12d7">DSS4</a> aDSS(a,b);
  ++iter;
  <span class="keywordflow">while</span> (aDSS.addFront(iter.get()) &amp;&amp; iter != theContour.end())
    ++iter;
  <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a269e1bb274603546481b9d0413470bd4">info</a>() &lt;&lt; <span class="stringliteral">&quot;Last point added:&quot;</span> &lt;&lt; iter.getPosition()-1 &lt;&lt; endl;
  <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a name="a12"></a><a class="code" href="classDGtal_1_1Trace.html#a6c28382776be9139655b4851fabe4dda">endBlock</a>();

  
  <span class="comment">// Recognition of a DSS beginning at the first point of the contour</span>
  <span class="comment">// trace.beginBlock(&quot;Recognition of a DSS along the contour&quot;);</span>
  <span class="comment">// trace.info() &lt;&lt; &quot;Initialisation of a DSS with the first two contour points&quot; &lt;&lt; endl;</span>
  <span class="comment">// DSS4 aDSS(ContourPoints[0],ContourPoints[1]);</span>
  <span class="comment">// trace.info() &lt;&lt; &quot;Add the points iteratively while the union is a DSS&quot; &lt;&lt; endl;</span>
  <span class="comment">// int i = 2;</span>
  <span class="comment">// while (aDSS.addFront(ContourPoints[i]) &amp;&amp; i&lt;ContourPoints.size())</span>
  <span class="comment">//   i++;</span>
  <span class="comment">// trace.info() &lt;&lt; &quot;Last point added:&quot; &lt;&lt; i-1 &lt;&lt; endl;</span>
  <span class="comment">// trace.endBlock();</span>
  
  <span class="comment">// Draw the DSS as its bounding box</span>
  board &lt;&lt; <a name="_a13"></a><a class="code" href="structDGtal_1_1SetMode.html">SetMode</a>(aDSS.styleName(), <span class="stringliteral">&quot;BoundingBox&quot;</span>) &lt;&lt; aDSS;
  board.<a class="codeRef" href="classLibBoard_1_1Board.html#adab1403965fea54c0de9bfe38e1e6724">saveSVG</a>(<span class="stringliteral">&quot;exampleDSS-2.svg&quot;</span>);
  board.<a class="codeRef" href="classLibBoard_1_1Board.html#a0bb157ee0eb70eb9281634e9ed311818">saveEPS</a>(<span class="stringliteral">&quot;exampleDSS-2.eps&quot;</span>);
  board.<a class="codeRef" href="classLibBoard_1_1Board.html#a9ced63899f213242c335189a4f5b1361">saveFIG</a>(<span class="stringliteral">&quot;exampleDSS-2.fig&quot;</span>);
  
  <span class="comment">// Clear the board </span>
  board.<a name="a14"></a><a class="codeRef" href="classLibBoard_1_1Board.html#a8ac75c688024ba3cd2b93515566cdd45">clear</a>();
  
  <span class="comment">// Decomposition of the contour into DSSs</span>
  <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a352b7160bf722e2f0bcbee5d0bad6ef3">beginBlock</a>(<span class="stringliteral">&quot;Decomposition of the contour into DSSs&quot;</span>);
  <a name="_a15"></a><a class="code" href="classDGtal_1_1GreedyDecomposition.html" title="Aim: Computes the greedy decomposition of a contour into primitives (the last point of the primitive ...">GreedyDecomposition&lt;ContourType,DSS4&gt;</a> theDecomposition(theContour);
  
  <span class="comment">// Draw the contour and set the bounding box mode for DSS drawing</span>
  board &lt;&lt; theContour &lt;&lt; <a class="code" href="structDGtal_1_1SetMode.html">SetMode</a>(aDSS.styleName(), <span class="stringliteral">&quot;BoundingBox&quot;</span>);
  
  <span class="comment">// Iterate over the decomposition DSSs</span>
  <a name="_a16"></a><a class="code" href="classDGtal_1_1GreedyDecomposition_1_1ConstIterator.html">GreedyDecomposition&lt;ContourType,DSS4&gt;::ConstIterator</a> it = 
    theDecomposition.<a name="a17"></a><a class="code" href="classDGtal_1_1GreedyDecomposition.html#afda256ce5a3bb1c06f2002736b53b365">begin</a>();
  <span class="keywordflow">for</span> ( ; it != theDecomposition.<a name="a18"></a><a class="code" href="classDGtal_1_1GreedyDecomposition.html#a195c5253704fa88890b8a8485113df90">end</a>(); ++it) {
    <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a269e1bb274603546481b9d0413470bd4">info</a>() &lt;&lt; <span class="stringliteral">&quot;segment number &quot;</span> &lt;&lt; it.getPosition() &lt;&lt; std::endl;
    <a class="code" href="namespaceDGtal_1_1Z2i.html#a78903bfd72845a4de0d67b894aea12d7">DSS4</a> segment(*it); 
    <span class="comment">// Display and draw the DSS on the board</span>
    <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a269e1bb274603546481b9d0413470bd4">info</a>() &lt;&lt; segment &lt;&lt; std::endl; 
    board &lt;&lt; segment; <span class="comment">// draw each segment</span>
  } 
  <a class="code" href="namespaceDGtal.html#a12ec1f42a02c105edd4796c98926fc9e">trace</a>.<a class="code" href="classDGtal_1_1Trace.html#a6c28382776be9139655b4851fabe4dda">endBlock</a>();
 
  board.<a class="codeRef" href="classLibBoard_1_1Board.html#adab1403965fea54c0de9bfe38e1e6724">saveSVG</a>(<span class="stringliteral">&quot;exampleDSS-3.svg&quot;</span>);
  board.<a class="codeRef" href="classLibBoard_1_1Board.html#a0bb157ee0eb70eb9281634e9ed311818">saveEPS</a>(<span class="stringliteral">&quot;exampleDSS-3.eps&quot;</span>);
  board.<a class="codeRef" href="classLibBoard_1_1Board.html#a9ced63899f213242c335189a4f5b1361">saveFIG</a>(<span class="stringliteral">&quot;exampleDSS-3.fig&quot;</span>);

  
  <span class="keywordflow">return</span> 0;
}
<span class="comment">//                                                                           //</span>
</pre></div> </div>
</div>
<hr class="footer"/><address class="footer"><small>Generated on Fri Dec 10 2010 13:16:32 for DGtal by&nbsp;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.1 </small></address>
</body>
</html>
