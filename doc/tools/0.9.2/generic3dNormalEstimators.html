<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.11"/>
<title>DGtalTools: generic3dNormalEstimators</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { init_search(); });
</script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="modern-doxygen-green.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DGtalTools 
   &#160;<span id="projectnumber">0.9.2</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.11 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="header">
  <div class="headertitle">
<div class="title">generic3dNormalEstimators </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>computes a normal vector field over a digitized 3D implicit surface for several estimators.</p>
<p><b>Usage:</b> ./estimators/generic3dNormalEstimators -p &lt;polynomial&gt; [options]</p>
<p>Computes a normal vector field over a digitized 3D implicit surface for several estimators (II|VCM|Trivial|True), specified with -e. You may add Kanungo noise with option -N. These estimators are compared with ground truth. You may then: 1) visualize the normals or the angle deviations with -V (if WITH_QGL_VIEWER is enabled), 2) outputs them as a list of cells/estimations with -n, 3) outputs them as a ImaGene file with -O, 4) outputs them as a NOFF file with -O, 5) computes estimation statistics with option -S.</p>
<p><b>Allowed</b> <b>options</b> <b>are</b> :</p>
<div class="fragment"><div class="line">-h [ --help ]                    display <span class="keyword">this</span> message</div><div class="line">-p [ --polynomial ] arg          the implicit polynomial whose zero-level </div><div class="line">                                 defines the shape of interest.</div><div class="line">-N [ --noise ] arg (=0)          the Kanungo noise level l=arg, with l^d the </div><div class="line">                                 probability that a point at distance d is </div><div class="line">                                 flipped inside/outside.</div><div class="line">-a [ --minAABB ] arg (=-10)      the min value of the AABB bounding box </div><div class="line">                                 (domain)</div><div class="line">-A [ --maxAABB ] arg (=10)       the max value of the AABB bounding box </div><div class="line">                                 (domain)</div><div class="line">-g [ --gridstep ] arg (=1)       the gridstep that defines the digitization </div><div class="line">                                 (often called h). </div><div class="line">-e [ --estimator ] arg (=True)   the chosen normal estimator: True | VCM | II</div><div class="line">                                 | Trivial</div><div class="line">-R [ --R-radius ] arg (=5)       the constant for parameter R in R(h)=R </div><div class="line">                                 h^alpha (VCM).</div><div class="line">-r [ --r-radius ] arg (=3)       the constant for parameter r in r(h)=r </div><div class="line">                                 h^alpha (VCM,II,Trivial).</div><div class="line">-k [ --kernel ] arg (=hat)       the function chi_r, either hat or ball.</div><div class="line">--alpha arg (=0)                 the parameter alpha in r(h)=r h^alpha (VCM).</div><div class="line">-t [ --trivial-radius ] arg (=3) the parameter t defining the radius for the </div><div class="line">                                 Trivial estimator. Also used for reorienting</div><div class="line">                                 the VCM.</div><div class="line">-E [ --embedding ] arg (=0)      the surfel -&gt; point embedding for VCM </div><div class="line">                                 estimator: 0: Pointels, 1: InnerSpel, 2: </div><div class="line">                                 OuterSpel.</div><div class="line">-o [ --output ] arg (=output)    the output basename. All generated files </div><div class="line">                                 will have the form &lt;arg&gt;-*, for instance </div><div class="line">                                 &lt;arg&gt;-angle-deviation-&lt;gridstep&gt;.txt, </div><div class="line">                                 &lt;arg&gt;-normals-&lt;gridstep&gt;.txt, </div><div class="line">                                 &lt;arg&gt;-cells-&lt;gridstep&gt;.txt, </div><div class="line">                                 &lt;arg&gt;-noff-&lt;gridstep&gt;.off.</div><div class="line">-S [ --angle-deviation-stats ]   computes angle deviation error and outputs </div><div class="line">                                 them in file &lt;basename&gt;-angle-deviation-&lt;gri</div><div class="line">                                 dstep&gt;.txt, as specified by -o &lt;basename&gt;.</div><div class="line">-x [ --export ] arg (=None)      exports surfel normals which can be viewed </div><div class="line">                                 with ImaGene tool &#39;viewSetOfSurfels&#39; in file</div><div class="line">                                 &lt;basename&gt;-cells-&lt;gridstep&gt;.txt, as </div><div class="line">                                 specified by -o &lt;basename&gt;. Parameter &lt;arg&gt; </div><div class="line">                                 is None|Normals|AngleDeviation. The color </div><div class="line">                                 depends on the angle deviation in degree: 0 </div><div class="line">                                 metallic blue, 5 light cyan, 10 light green,</div><div class="line">                                 15 light yellow, 20 yellow, 25 orange, 30 </div><div class="line">                                 red, 35, dark red, 40- grey</div><div class="line">-n [ --normals ]                 outputs every surfel, its estimated normal, </div><div class="line">                                 and the ground truth normal in file </div><div class="line">                                 &lt;basename&gt;-normals-&lt;gridstep&gt;.txt, as </div><div class="line">                                 specified by -o &lt;basename&gt;.</div><div class="line">-O [ --noff ]                    exports the digital surface with normals as </div><div class="line">                                 NOFF file &lt;basename&gt;-noff-&lt;gridstep&gt;.off, as</div><div class="line">                                 specified by -o &lt;basename&gt;..</div><div class="line">-V [ --view ] arg (=None)        view the digital surface with normals.  </div><div class="line">                                 Parameter &lt;arg&gt; is None|Normals|AngleDeviati</div><div class="line">                                 on. The color depends on the angle deviation</div><div class="line">                                 in degree: 0 metallic blue, 5 light cyan, 10</div><div class="line">                                 light green, 15 light yellow, 20 yellow, 25 </div><div class="line">                                 orange, 30 red, 35, dark red, 40- grey.</div></div><!-- fragment --><p><b>Example</b> <b>of</b> <b>implicit</b> <b>surface</b> (specified by -p):</p><ul>
<li>ellipse : 90-3*x^2-2*y^2-z^2</li>
<li>torus : -1*(x^2+y^2+z^2+6*6-2*2)^2+4*6*6*(x^2+y^2)</li>
<li>rcube : 6561-x^4-y^4-z^4</li>
<li>goursat : 8-0.03*x^4-0.03*y^4-0.03*z^4+2*x^2+2*y^2+2*z^2</li>
<li>distel : 10000-(x^2+y^2+z^2+1000*(x^2+y^2)*(x^2+z^2)*(y^2+z^2))</li>
<li>leopold : 100-(x^2*y^2*z^2+4*x^2+4*y^2+3*z^2)</li>
<li>diabolo : x^2-(y^2+z^2)^2</li>
<li>heart : -1*(x^2+2.25*y^2+z^2-1)^3+x^2*z^3+0.1125*y^2*z^3</li>
<li>crixxi : -0.9*(y^2+z^2-1)^2-(x^2+y^2-1)^3</li>
</ul>
<p><b>Implemented</b> <b>estimators</b> (specified by -e):</p><ul>
<li>True : supposed to be the ground truth for computations. Of course, it is only approximations.</li>
<li>VCM : normal estimator by digital Voronoi Covariance Matrix. Radii parameters are given by -R, -r.</li>
<li>II : normal estimator by Integral Invariants. Radius parameter is given by -r.</li>
<li>Trivial : the normal obtained by average trivial surfel normals in a ball neighborhood. Radius parameter is given by -r.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>:<ul>
<li>This is a normal <em>direction</em> evaluator more than a normal vector evaluator. Orientations of normals are deduced from ground truth. This is due to the fact that II and VCM only estimates normal directions.</li>
<li>This tool only analyses one surface component, and one that contains at least as many surfels as the width of the digital bounding box. This is required when analysing noisy data, where a lot of the small components are spurious. The drawback is that you cannot analyse the normals on a surface with several components.</li>
</ul>
</dd></dl>
<p><b>Example:</b> </p>
<ul>
<li><b>Example</b> <b>of</b> <b>normal</b> <b>comparisons:</b> You can estimate the normal vectors and compare the error with the true normals (option -V AngleDeviation): <div class="fragment"><div class="line"><span class="preprocessor"># apply the Integral Invariant estimator  (options  -e II  -r 8 ):</span></div><div class="line">$ generic3dNormalEstimators -p <span class="stringliteral">&quot;10000-(x^2+y^2+z^2+1000*(x^2+y^2)*(x^2+z^2)*(y^2+z^2))&quot;</span> -a -10 -A 10 -e II  -r 8  -V AngleDeviation -g 0.05 </div><div class="line"><span class="preprocessor"># apply the Voronoi Covariance Measure based estimator  (options  -e VCM  -r 8 ): </span></div><div class="line">$ generic3dNormalEstimators -p <span class="stringliteral">&quot;10000-(x^2+y^2+z^2+1000*(x^2+y^2)*(x^2+z^2)*(y^2+z^2))&quot;</span>  -a -10 -A 10 -e VCM   -R 20 -r 8 -V AngleDeviation -g 0.05 </div><div class="line"><span class="preprocessor"># to display source digital surface  :  visualize the normals and tape Key E to export surface (in  exportedMesh.off) </span></div><div class="line">$ generic3dNormalEstimators -p <span class="stringliteral">&quot;10000-(x^2+y^2+z^2+1000*(x^2+y^2)*(x^2+z^2)*(y^2+z^2))&quot;</span>  -a -10 -A 10 -e VCM   -R 20 -r 8 -V Normals -g 0.05 </div><div class="line"><span class="preprocessor"># visualize generated file:</span></div><div class="line"><span class="preprocessor">$ meshViewer -i  exportedMesh.off</span></div></div><!-- fragment --> You should obtain such a result: <table class="doxtable">
<tr>
<th align="center">type </th><th align="center">visualization  </th></tr>
<tr>
<td align="center">digital surface </td><td align="center"><div class="image">
<img src="resGeneric3dNormalEstimatorsDiscrete.png" alt="resGeneric3dNormalEstimatorsDiscrete.png"/>
</div>
 </td></tr>
<tr>
<td align="center">VCM angle-deviation </td><td align="center"><div class="image">
<img src="resGeneric3dNormalEstimatorsVCM.png" alt="resGeneric3dNormalEstimatorsVCM.png"/>
</div>
 </td></tr>
<tr>
<td align="center">II angle-deviation </td><td align="center"><div class="image">
<img src="resGeneric3dNormalEstimatorsII.png" alt="resGeneric3dNormalEstimatorsII.png"/>
</div>
 </td></tr>
</table>
</li>
<li><b>Example</b> <b>of</b> <b>normal</b> <b>visualization</b> with noise add: This tool allows to add some noise on initial shape (option -N) and it is also possiblt to visualize the source shape by using the resulting normals: <div class="fragment"><div class="line"><span class="preprocessor"># apply the Integral Invariant estimator  (options  -e II  -r 6 ): </span></div><div class="line"> generic3dNormalEstimators -p <span class="stringliteral">&quot;100-(x^2*y^2*z^2+4*x^2+4*y^2+3*z^2)&quot;</span>  -a -10 -A 10 -e II  -r 6 -V Normals -g 0.1 -N 0.3</div><div class="line"># apply the Voronoi Covariance Measure based estimator  (options  -e VCM  -r 8 ):  </div><div class="line">  generic3dNormalEstimators -p <span class="stringliteral">&quot;100-(x^2*y^2*z^2+4*x^2+4*y^2+3*z^2)&quot;</span>  -a -10 -A 10 -e VCM   -R 10 -r 5 -V Normals -g 0.1 -N 0.3</div><div class="line"># apply the true normals:</div><div class="line">./estimators/generic3dNormalEstimators -p <span class="stringliteral">&quot;100-(x^2*y^2*z^2+4*x^2+4*y^2+3*z^2)&quot;</span>  -a -10 -A 10 -e True  -V Normals -g 0.1 -N 0.3</div><div class="line"># to display source digital surface  :  tape Key E on previous displays to export surface (in  exportedMesh.off) </div><div class="line"># visualize generated file:</div><div class="line">$ meshViewer -i  exportedMesh.off</div></div><!-- fragment --></li>
</ul>
<p>You should obtain such a result: </p><table class="doxtable">
<tr>
<th align="center">type </th><th align="center">visualization  </th></tr>
<tr>
<td align="center">digital surface </td><td align="center"><div class="image">
<img src="resGeneric3dNormalEstimatorsNoiseDiscrete.png" alt="resGeneric3dNormalEstimatorsNoiseDiscrete.png"/>
</div>
 </td></tr>
<tr>
<td align="center">VCM estimator </td><td align="center"><div class="image">
<img src="resGeneric3dNormalEstimatorsNoiseVCM.png" alt="resGeneric3dNormalEstimatorsNoiseVCM.png"/>
</div>
 </td></tr>
<tr>
<td align="center">II estimator </td><td align="center"><div class="image">
<img src="resGeneric3dNormalEstimatorsNoiseII.png" alt="resGeneric3dNormalEstimatorsNoiseII.png"/>
</div>
 </td></tr>
<tr>
<td align="center">True Normals </td><td align="center"><div class="image">
<img src="resGeneric3dNormalEstimatorsNoiseTrue.png" alt="resGeneric3dNormalEstimatorsNoiseTrue.png"/>
</div>
 </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="generic3dNormalEstimators_8cpp_source.html">generic3dNormalEstimators.cpp</a> </dd></dl>
</div></div><!-- contents -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Companion project associated to  <a href= "http://liris.cnrs.fr/dgtal/doc/nightly/"> DGtal </a>;
    Generated on Mon Jun 27 2016 12:21:49 for DGtalTools by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.11
</small></address>
</body>
</html>
