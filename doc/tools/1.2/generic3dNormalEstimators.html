<!-- HTML header for doxygen 1.8.11-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<title>DGtalTools: generic3dNormalEstimators</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/MathJax.js?config=TeX-MML-AM_CHTML/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="modern-doxygen-green.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DGtalTools 
   &#160;<span id="projectnumber">1.2.0</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">generic3dNormalEstimators </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>computes a normal vector field over a digitized 3D implicit surface for several estimators.</p>
<p><b>Usage:</b> ./estimators/generic3dNormalEstimators -p &lt;polynomial&gt; [options]</p>
<p>Computes a normal vector field over a digitized 3D implicit surface for several estimators (II|VCM|Trivial|True), specified with -e. You may add Kanungo noise with option -N. These estimators are compared with ground truth. You may then: 1) visualize the normals or the angle deviations with -V (if WITH_QGL_VIEWER is enabled), 2) outputs them as a list of cells/estimations with -n, 3) outputs them as a ImaGene file with -O, 4) outputs them as a NOFF file with -O, 5) computes estimation statistics with option -S.</p>
<p><b>Allowed</b> <b>options</b> <b>are</b> :</p>
<div class="fragment"><div class="line">-h,--help                             Print <span class="keyword">this</span> help message and exit</div>
<div class="line">-p,--polynomial TEXT REQUIRED         the implicit polynomial whose zero-level defines the shape of interest.</div>
<div class="line">-N,--noise FLOAT=0                    the Kanungo noise level l=arg, with l^d the probability that a point at distance d is flipped inside/outside.</div>
<div class="line">-a,--minAABB FLOAT=-10                the min value of the AABB bounding box (domain)</div>
<div class="line">-A,--maxAABB FLOAT=10                 the max value of the AABB bounding box (domain)</div>
<div class="line">-g,--gridstep FLOAT=1                 the gridstep that defines the digitization (often called h).</div>
<div class="line">-e,--estimator TEXT:{True,VCM,II,Trivial}=True</div>
<div class="line">                                      the chosen normal estimator: True | VCM | II | Trivial</div>
<div class="line">-R,--R-radius FLOAT=5                 the constant <span class="keywordflow">for</span> parameter R in R(h)=R h^alpha (VCM).</div>
<div class="line">-r,--r-radius FLOAT=3                 the constant <span class="keywordflow">for</span> parameter r in r(h)=r h^alpha (VCM,II,Trivial).</div>
<div class="line">-k,--kernel TEXT=hat                  the <span class="keyword">function</span> chi_r, either hat or ball.</div>
<div class="line">--alpha FLOAT=0                       the parameter alpha in r(h)=r h^alpha (VCM).</div>
<div class="line">-t,--trivial-radius FLOAT=3           the parameter t defining the radius <span class="keywordflow">for</span> the Trivial estimator. Also used <span class="keywordflow">for</span> reorienting the VCM.</div>
<div class="line">-E,--embedding INT=0                  the surfel -&gt; point embedding <span class="keywordflow">for</span> VCM estimator: 0: Pointels, 1: InnerSpel, 2: OuterSpel.</div>
<div class="line">-o,--output TEXT=output               the output basename. All generated files will have the form &lt;arg&gt;-*, <span class="keywordflow">for</span> instance &lt;arg&gt;-angle-deviation-&lt;gridstep&gt;.txt, &lt;arg&gt;-normals-&lt;gridstep&gt;.txt, &lt;arg&gt;-cells-&lt;gridstep&gt;.txt, &lt;arg&gt;-noff-&lt;gridstep&gt;.off.</div>
<div class="line">-S,--angle-deviation-stats            computes angle deviation error and outputs them in file &lt;basename&gt;-angle-deviation-&lt;gridstep&gt;.txt, as specified by -o &lt;basename&gt;.</div>
<div class="line">-x,--export TEXT=None                 exports surfel normals which can be viewed with ImaGene tool <span class="stringliteral">&#39;viewSetOfSurfels&#39;</span> in file &lt;basename&gt;-cells-&lt;gridstep&gt;.txt, as specified by -o &lt;basename&gt;. Parameter &lt;arg&gt; is None|Normals|AngleDeviation. The color depends on the angle deviation in degree: 0 metallic blue, 5 light cyan, 10 light green, 15 light yellow, 20 yellow, 25 orange, 30 red, 35, dark red, 40- grey</div>
<div class="line">-n,--normals                          outputs every surfel, its estimated normal, and the ground truth normal in file &lt;basename&gt;-normals-&lt;gridstep&gt;.txt, as specified by -o &lt;basename&gt;.</div>
<div class="line">-O,--noff                             exports the digital surface with normals as NOFF file &lt;basename&gt;-noff-&lt;gridstep&gt;.off, as specified by -o &lt;basename&gt;..</div>
<div class="line">-V,--view TEXT                        view the digital surface with normals.  Parameter &lt;arg&gt; is None|Normals|AngleDeviation. The color depends on the angle deviation in degree: 0 metallic blue, 5 light cyan, 10 light green, 15 light yellow, 20 yellow, 25 orange, 30 red, 35, dark red, 40- grey.</div>
</div><!-- fragment --><p><b>Example</b> <b>of</b> <b>implicit</b> <b>surface</b> (specified by -p):</p><ul>
<li>ellipse : 90-3*x^2-2*y^2-z^2</li>
<li>torus : -1*(x^2+y^2+z^2+6*6-2*2)^2+4*6*6*(x^2+y^2)</li>
<li>rcube : 6561-x^4-y^4-z^4</li>
<li>goursat : 8-0.03*x^4-0.03*y^4-0.03*z^4+2*x^2+2*y^2+2*z^2</li>
<li>distel : 10000-(x^2+y^2+z^2+1000*(x^2+y^2)*(x^2+z^2)*(y^2+z^2))</li>
<li>leopold : 100-(x^2*y^2*z^2+4*x^2+4*y^2+3*z^2)</li>
<li>diabolo : x^2-(y^2+z^2)^2</li>
<li>heart : -1*(x^2+2.25*y^2+z^2-1)^3+x^2*z^3+0.1125*y^2*z^3</li>
<li>crixxi : -0.9*(y^2+z^2-1)^2-(x^2+y^2-1)^3</li>
</ul>
<p><b>Implemented</b> <b>estimators</b> (specified by -e):</p><ul>
<li>True : supposed to be the ground truth for computations. Of course, it is only approximations.</li>
<li>VCM : normal estimator by digital Voronoi Covariance Matrix. Radii parameters are given by -R, -r.</li>
<li>II : normal estimator by Integral Invariants. Radius parameter is given by -r.</li>
<li>Trivial : the normal obtained by average trivial surfel normals in a ball neighborhood. Radius parameter is given by -r.</li>
</ul>
<dl class="section note"><dt>Note</dt><dd>:<ul>
<li>This is a normal <em>direction</em> evaluator more than a normal vector evaluator. Orientations of normals are deduced from ground truth. This is due to the fact that II and VCM only estimates normal directions.</li>
<li>This tool only analyses one surface component, and one that contains at least as many surfels as the width of the digital bounding box. This is required when analysing noisy data, where a lot of the small components are spurious. The drawback is that you cannot analyse the normals on a surface with several components.</li>
</ul>
</dd></dl>
<p><b>Example:</b> </p>
<ul>
<li><b>Example</b> <b>of</b> <b>normal</b> <b>comparisons:</b> You can estimate the normal vectors and compare the error with the true normals (option -V AngleDeviation): <div class="fragment"><div class="line"><span class="preprocessor"># apply the Integral Invariant estimator  (options  -e II  -r 8 ):</span></div>
<div class="line">$ generic3dNormalEstimators -p <span class="stringliteral">&quot;10000-(x^2+y^2+z^2+1000*(x^2+y^2)*(x^2+z^2)*(y^2+z^2))&quot;</span> -a -10 -A 10 -e II  -r 8  -V AngleDeviation -g 0.05 </div>
<div class="line"><span class="preprocessor"># apply the Voronoi Covariance Measure based estimator  (options  -e VCM  -r 8 ): </span></div>
<div class="line">$ generic3dNormalEstimators -p <span class="stringliteral">&quot;10000-(x^2+y^2+z^2+1000*(x^2+y^2)*(x^2+z^2)*(y^2+z^2))&quot;</span>  -a -10 -A 10 -e VCM   -R 20 -r 8 -V AngleDeviation -g 0.05 </div>
<div class="line"><span class="preprocessor"># to display source digital surface  :  visualize the normals and tape Key E to export surface (in  exportedMesh.off) </span></div>
<div class="line">$ generic3dNormalEstimators -p <span class="stringliteral">&quot;10000-(x^2+y^2+z^2+1000*(x^2+y^2)*(x^2+z^2)*(y^2+z^2))&quot;</span>  -a -10 -A 10 -e VCM   -R 20 -r 8 -V Normals -g 0.05 </div>
<div class="line"><span class="preprocessor"># visualize generated file:</span></div>
<div class="line"><span class="preprocessor">$ meshViewer -i  exportedMesh.off</span></div>
</div><!-- fragment --> You should obtain such a result: <table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">type   </th><th class="markdownTableHeadCenter">visualization    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">digital surface   </td><td class="markdownTableBodyCenter"><img src="resGeneric3dNormalEstimatorsDiscrete.png" alt="" class="inline"/>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">VCM angle-deviation   </td><td class="markdownTableBodyCenter"><img src="resGeneric3dNormalEstimatorsVCM.png" alt="" class="inline"/>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">II angle-deviation   </td><td class="markdownTableBodyCenter"><img src="resGeneric3dNormalEstimatorsII.png" alt="" class="inline"/>  </td></tr>
</table>
</li>
<li><b>Example</b> <b>of</b> <b>normal</b> <b>visualization</b> with noise add: This tool allows to add some noise on initial shape (option -N) and it is also possiblt to visualize the source shape by using the resulting normals: <div class="fragment"><div class="line"><span class="preprocessor"># apply the Integral Invariant estimator  (options  -e II  -r 6 ): </span></div>
<div class="line"> generic3dNormalEstimators -p <span class="stringliteral">&quot;100-(x^2*y^2*z^2+4*x^2+4*y^2+3*z^2)&quot;</span>  -a -10 -A 10 -e II  -r 6 -V Normals -g 0.1 -N 0.3</div>
<div class="line"><span class="preprocessor"># apply the Voronoi Covariance Measure based estimator  (options  -e VCM  -r 8 ):  </span></div>
<div class="line">  generic3dNormalEstimators -p <span class="stringliteral">&quot;100-(x^2*y^2*z^2+4*x^2+4*y^2+3*z^2)&quot;</span>  -a -10 -A 10 -e VCM   -R 10 -r 5 -V Normals -g 0.1 -N 0.3</div>
<div class="line"><span class="preprocessor"># apply the true normals:</span></div>
<div class="line">./estimators/generic3dNormalEstimators -p <span class="stringliteral">&quot;100-(x^2*y^2*z^2+4*x^2+4*y^2+3*z^2)&quot;</span>  -a -10 -A 10 -e True  -V Normals -g 0.1 -N 0.3</div>
<div class="line"><span class="preprocessor"># to display source digital surface  :  tape Key E on previous displays to export surface (in  exportedMesh.off) </span></div>
<div class="line"><span class="preprocessor"># visualize generated file:</span></div>
<div class="line"><span class="preprocessor">$ meshViewer -i  exportedMesh.off</span></div>
</div><!-- fragment --></li>
</ul>
<p>You should obtain such a result: </p><table class="markdownTable">
<tr class="markdownTableHead">
<th class="markdownTableHeadCenter">type   </th><th class="markdownTableHeadCenter">visualization    </th></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">digital surface   </td><td class="markdownTableBodyCenter"><img src="resGeneric3dNormalEstimatorsNoiseDiscrete.png" alt="" class="inline"/>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">VCM estimator   </td><td class="markdownTableBodyCenter"><img src="resGeneric3dNormalEstimatorsNoiseVCM.png" alt="" class="inline"/>   </td></tr>
<tr class="markdownTableRowOdd">
<td class="markdownTableBodyCenter">II estimator   </td><td class="markdownTableBodyCenter"><img src="resGeneric3dNormalEstimatorsNoiseII.png" alt="" class="inline"/>   </td></tr>
<tr class="markdownTableRowEven">
<td class="markdownTableBodyCenter">True Normals   </td><td class="markdownTableBodyCenter"><img src="resGeneric3dNormalEstimatorsNoiseTrue.png" alt="" class="inline"/>  </td></tr>
</table>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="generic3dNormalEstimators_8cpp_source.html">generic3dNormalEstimators.cpp</a> </dd></dl>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.11-->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Companion project associated to  <a href= "http://liris.cnrs.fr/dgtal/doc/nightly/"> DGtal </a>;
    Generated on Wed Jun 2 2021 15:34:52 for DGtalTools by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.9.1
</small></address>
</body>
</html>
