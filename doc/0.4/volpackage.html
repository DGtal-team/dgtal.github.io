<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<title>DGtal: nD Volumetric Package</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css"/>
</head>
<body onload='searchBox.OnSelectItem(0);'>
<!-- Generated by Doxygen 1.7.3 -->
<script type="text/javascript"><!--
var searchBox = new SearchBox("searchBox", "search",false,'Search');
--></script>
<script type="text/javascript">
function hasClass(ele,cls) {
  return ele.className.match(new RegExp('(\\s|^)'+cls+'(\\s|$)'));
}

function addClass(ele,cls) {
  if (!this.hasClass(ele,cls)) ele.className += " "+cls;
}

function removeClass(ele,cls) {
  if (hasClass(ele,cls)) {
    var reg = new RegExp('(\\s|^)'+cls+'(\\s|$)');
    ele.className=ele.className.replace(reg,' ');
  }
}

function toggleVisibility(linkObj) {
 var base = linkObj.getAttribute('id');
 var summary = document.getElementById(base + '-summary');
 var content = document.getElementById(base + '-content');
 var trigger = document.getElementById(base + '-trigger');
 if ( hasClass(linkObj,'closed') ) {
   summary.style.display = 'none';
   content.style.display = 'block';
   trigger.src = 'open.png';
   removeClass(linkObj,'closed');
   addClass(linkObj,'opened');
 } else if ( hasClass(linkObj,'opened') ) {
   summary.style.display = 'block';
   content.style.display = 'none';
   trigger.src = 'closed.png';
   removeClass(linkObj,'opened');
   addClass(linkObj,'closed');
 }
 return false;
}
</script>
<div id="top">
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">DGtal&#160;<span id="projectnumber">0.4.0</span></div>
  </td>
 </tr>
 </tbody>
</table>
</div>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="modules.html"><span>Modules</span></a></li>
      <li><a href="namespaces.html"><span>Namespaces</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li><a href="dirs.html"><span>Directories</span></a></li>
      <li><a href="examples.html"><span>Examples</span></a></li>
      <li id="searchli">
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div>
<div class="header">
  <div class="headertitle">
<h1>nD Volumetric Package </h1>  </div>
</div>
<div class="contents">
<div class="textblock"><dl class="author"><dt><b>Author:</b></dt><dd>David Coeurjolly</dd></dl>
<p>This part of the manual describes the <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a> volumetric package and its classes.</p>
<p>Table of contents:</p>
<ol type="1">
<li><a class="el" href="volpackage.html#introvol">Introduction</a></li>
<li><a class="el" href="volpackage.html#dt">Distance Transformation</a></li>
<li><a class="el" href="volpackage.html#rdt">Reverse Distance Transformation</a></li>
<li><a class="el" href="volpackage.html#ma">Discrete Medial Axis Extraction</a></li>
<li><a class="el" href="volpackage.html#sep">Separable Metric Traits</a></li>
<li><a class="el" href="volpackage.html#refsvol">References</a></li>
</ol>
<h2><a class="anchor" id="introvol"></a>
Introduction</h2>
<p>For decades, distance transformation (DT) and geometrical skeleton extraction have been classic tools for shape analysis [ROSEN_66,ROSEN_68]. The DT of a shape consists in labelling object grid points with the distance to the closest background pixel. From the DT values, we thus have information on the shape geometry. Beside its applications in shape description, DT has been used in many situations such as shape analysis, shape matching, shape-based interpolation, motion planning, image registration, or differential measurement estimation.</p>
<p>In the literature, many techniques have been proposed to compute the DT given a metric with a trade-off between algorithmic performances and the <em>accuracy</em> of the metric compared to the Euclidean one. Hence, many papers have considered distances based on chamfer masks [ROSEN_68,BORGE_86], or sequences of chamfer distances; the vector displacement based Euclidean distance [DANI_80,RAGN_90,MULL_92] the Voronoi diagram based Euclidean distance [BREU_95, MAUR_2003] or the square of the Euclidean distance [SAITO_94,HIRA_96]. From a computational point of view, several of these methods lead to time optimal algorithms to compute the error-free Euclidean Distance Transformation (EDT) for <em>n-</em> dimensional binary images: the extension of these algorithms is straightforward since they use separable techniques to compute the DT; <em>n</em> one-dimensional operations -one per direction of the coordinate axis- are performed.</p>
<p>In [COEU_07], it has been demonstrated that a similar decomposition can be used to compute both the reverse distance transformation and a discrete medial axis of the binary shape.</p>
<p>In fact, the separable decomposition and the associated algorithmic tools can be used on a wider class of metrics (see [HIRA_96] or [MAUR_2003]). For instance, all weighted <img class="formulaInl" alt="$l_p$" src="form_20.png"/> metrics defined in <img class="formulaInl" alt="$R^n$" src="form_21.png"/> by </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ d_{L_p} (u,v) = \left ( \sum_{i=0}^n w_i|u_i-v_i |^p \right )^{\frac{1}{p}}\]" src="form_22.png"/>
</p>
<p>can be considered.</p>
<p>In <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a>, we have chosen to separate the metric from the algorithmic decomposition. We discuss in section <a class="el" href="volpackage.html#sep">Separable Metric Traits</a> on the construction of a separable metric type.</p>
<h2><a class="anchor" id="dt"></a>
Distance Transformation</h2>
<p>Given a binary object <img class="formulaInl" alt="$ X $" src="form_23.png"/> and its complementary <img class="formulaInl" alt="$\bar{X}$" src="form_24.png"/>, the distance transformation is a mapping of points <img class="formulaInl" alt="$ x\in X$" src="form_25.png"/> with distance values such that </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ DT(x) = \min_{y\in\bar{X}} ( d(x,y)) \]" src="form_26.png"/>
</p>
<p>For the Euclidean metric in dimension 2, it is equivalent to </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ DT(x) =\sqrt{ \min_{y\in\bar{X}} ( (x_0-y_0)^2 + (x_1-y_1)^2 ) } \]" src="form_27.png"/>
</p>
<p> with <img class="formulaInl" alt="$x(x_0,x_1)\in R^2$" src="form_28.png"/>.</p>
<p>Hence, the key point for exact computations is to consider square of distances and to represent these quantities as integers. In other words, we have to specify a type for the output values such that it can be used to represent square of input integers (to be precise, <em>n</em> sums of squares in dimension <em>n</em>). For <img class="formulaInl" alt="$l_p$" src="form_20.png"/> metrics, the output type should be able to represent integers made of sums of numbers <img class="formulaInl" alt="$ (x_i-y_i)^p$" src="form_29.png"/>.</p>
<p>As a consequence, the class <a class="el" href="classDGtal_1_1DistanceTransformation.html" title="Aim: Implementation of the linear in time distance transformation.">DistanceTransformation</a> is parametrized by three elements:</p>
<ul>
<li>an Input image type</li>
<li>and a static number "p" used to define the <img class="formulaInl" alt="$l_p$" src="form_20.png"/> metric</li>
</ul>
<p>An optional IntegerLong template parameter with default type <a class="el" href="namespaceDGtal.html#a1c09e3f63904ff371f1b99f45069fc63" title="signed 94-bit integer.">DGtal::int64_t</a> can be specified to represent the sums of <img class="formulaInl" alt="$x_i^p$" src="form_30.png"/> values. This type is important because it corresponds to the Value type of the <a class="el" href="classDGtal_1_1DistanceTransformation.html#a01875821fcfd395cee6b2282275d84af" title="Type of resulting image.">DistanceTransformation::OutputImage</a> type that is used to store the output result.</p>
<p>Hence, the <a class="el" href="classDGtal_1_1DistanceTransformation.html" title="Aim: Implementation of the linear in time distance transformation.">DistanceTransformation</a> class provides</p>
<ul>
<li>a output image type;</li>
<li>a method to compute the distance transformation of an input image.</li>
</ul>
<dl class="note"><dt><b>Note:</b></dt><dd>The output image type provided by <a class="el" href="classDGtal_1_1DistanceTransformation.html" title="Aim: Implementation of the linear in time distance transformation.">DistanceTransformation</a> is a <a class="el" href="classDGtal_1_1ImageContainerBySTLVector.html">ImageContainerBySTLVector</a> whose domain specification is copied from the input image type and whose value type is IntegerLong to return exact values.</dd></dl>
<p>For example (using the DGtal::StdDefs shortcuts): </p>
<div class="fragment"><pre class="fragment"><a class="code" href="namespaceDGtal_1_1Z2i.html#ac0a04516c81db6f4a583eddda0f64875">Z2i::Point</a> a ( 0, 0 );
<a class="code" href="namespaceDGtal_1_1Z2i.html#ac0a04516c81db6f4a583eddda0f64875">Z2i::Point</a> b ( 127, 127);

<span class="comment">//Input image with unsigned char values</span>
<span class="keyword">typedef</span> ImageSelector&lt;Z2i::Domain, unsigned int&gt;::Type Image;
Image image ( a, b );

<span class="comment">//...</span>
<span class="comment">// set values in image (by default 0-value pixels are background</span>
<span class="comment">// pixels, otherwise, see ForegroundPredicate in DistanceTransformation).</span>
<span class="comment">//...</span>

<span class="comment">//Definition of the DistanceTransformation operator for the l_2 metric</span>
<span class="keyword">typedef</span> DistanceTransformation&lt; Image, 2&gt; DTL2;
<span class="keyword">typedef</span> DTL2::OutputImage OutputImage
DTL2 dt;

OutputImage result = dt.compute( image );
</pre></div><p>Few comments can be made from this example. First, Z2i::Image is defined on a <a class="el" href="namespaceDGtal_1_1Z2i.html#aca523bebdae58eb19385aaefffff8bc5">Z2i::Domain</a> whose pixel coordinates Z2i::Space::Coordinate have type <a class="el" href="namespaceDGtal.html#ac1e9ac6a329319ae13c51c0c9e92486a" title="signed 32-bit integer.">DGtal::int32_t</a>. In this example, we have used the default <a class="el" href="namespaceDGtal.html#ab33c0c25b8cc3cd86de343bca34329f5" title="unsigned 64-bit integer.">DGtal::uint64_t</a> type to store sum of two square of Coordinate differences. Since the capacity of the output image value type is important for memory issues, the method <a class="el" href="classDGtal_1_1DistanceTransformation.html#af8a9289a9cd2a8d5b8159d5bba112143">DistanceTransformation::checkTypesValidity</a> can check at runtime the type validity (based on the image size and dimension to have a tighter estimation).</p>
<h2><a class="anchor" id="rdt"></a>
Reverse Distance Transformation</h2>
<p>Given a set of balls and a domain, the aim of the reverse reconstruction is to compute the binary shape defined as the union of the input balls. In other word, a point <em>x</em> belong to the set <img class="formulaInl" alt="$X$" src="form_6.png"/> is there exists at least one ball containing <img class="formulaInl" alt="$x$" src="form_31.png"/>.</p>
<p>This notion is deeply linked to the distance transformation computation since it can interpreted as a reverse operator: </p>
<p class="formulaDsp">
<img class="formulaDsp" alt="\[ REDT(DT(X)) = X \]" src="form_32.png"/>
</p>
<p>In <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a>, the input set of balls is specified by an image and a grid point with value greater than 0 indicates a ball. Hence, the <a class="el" href="classDGtal_1_1ReverseDistanceTransformation.html" title="Aim: Implementation of the linear in time reverse distance transformation.">ReverseDistanceTransformation</a> class has a similar usage than the <a class="el" href="classDGtal_1_1DistanceTransformation.html" title="Aim: Implementation of the linear in time distance transformation.">DistanceTransformation</a> one:</p>
<div class="fragment"><pre class="fragment"><a class="code" href="namespaceDGtal_1_1Z2i.html#ac0a04516c81db6f4a583eddda0f64875">Z2i::Point</a> a ( 0, 0 );
<a class="code" href="namespaceDGtal_1_1Z2i.html#ac0a04516c81db6f4a583eddda0f64875">Z2i::Point</a> b ( 127, 127);

<span class="comment">//Input image with unsigned char values</span>
<span class="keyword">typedef</span> ImageSelector&lt;Z2i::Domain, unsigned int&gt;::Type Image;
Image image ( a, b );

<span class="comment">//...</span>
<span class="comment">// set values in image (by default 0-value pixels are background</span>
<span class="comment">// pixels, otherwise, see ForegroundPredicate in DistanceTransformation).</span>
<span class="comment">//...</span>

<span class="comment">//Definition of the DistanceTransformation operator for the l_2 metric</span>
<span class="keyword">typedef</span> DistanceTransformation&lt; Image, 2&gt; DTL2;
<span class="keyword">typedef</span> DTL2::OutputImage OutputImage
DTL2 dt;

OutputImage result = dt.compute( image );

<span class="comment">//Definition of the ReverseDistanceTransformation opertor for the l_2</span>
<span class="comment">//metric</span>
<span class="keyword">typedef</span> ReverseDistanceTransformation&lt; OutputImage, 2&gt; RDTL2;
<span class="keyword">typedef</span> RDTL2::OutputImage OutputReconstruction;
RDTL2 rdt;

OutputReconstruction reconstruction = rdt.reconstruction(results);

<span class="comment">//we can check that reconstruction ~ image</span>
</pre></div><p>From this example, we can notice that:</p>
<ul>
<li>the first template parameter type of <a class="el" href="classDGtal_1_1ReverseDistanceTransformation.html" title="Aim: Implementation of the linear in time reverse distance transformation.">ReverseDistanceTransformation</a> is an image type whose Value must be consistent with the <img class="formulaInl" alt="$l_p$" src="form_20.png"/> metric as discussed in the <a class="el" href="classDGtal_1_1DistanceTransformation.html" title="Aim: Implementation of the linear in time distance transformation.">DistanceTransformation</a> section;</li>
<li>the second parmeter is the static integer <img class="formulaInl" alt="$p$" src="form_33.png"/>.</li>
</ul>
<p>There is an optional third template parameter to specify the value type of the output binary image (default is DGta::int8_t). During the construction of the <em>rdt</em> object, we can also optionnaly specify the value used to represent object grid points (set <img class="formulaInl" alt="$X$" src="form_6.png"/>, default value is 1) and background grid points (default value is '0'). For instance </p>
<div class="fragment"><pre class="fragment">RDTL2 rdt(128,0);
</pre></div><p> will affect the value 128 to object points and 0 otherwise.</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>Obviously, the reconstruction will be incorrect if the metric used in the distance transformation is not the same as the metric used for the reconstruction.</dd></dl>
<h2><a class="anchor" id="ma"></a>
Discrete Medial Axis Extraction</h2>
<dl class="todo"><dt><b><a class="el" href="todo.html#_todo000004">Todo:</a></b></dt><dd>complete code/doc</dd></dl>
<h2><a class="anchor" id="sep"></a>
Separable Metric Traits</h2>
<p>As discussed in the introduction, the same algorithmic decomposition can be used on different metrics. In <a class="el" href="namespaceDGtal.html" title="DGtal is the top-level namespace which contains all DGtal functions and types.">DGtal</a>, such suitable metrics are models of the concept <a class="el" href="structDGtal_1_1CSeparableMetric.html">CSeparableMetric</a>, defined in the <a class="el" href="structDGtal_1_1SeparableMetricTraits.html" title="Aim: Implements basic functions associated to metrics used by separable volumetric algorithms...">SeparableMetricTraits</a> class. At this point, we have specialization for the Euclidean metric ( <img class="formulaInl" alt="$l_2$" src="form_34.png"/>), the Chessboard distance ( <img class="formulaInl" alt="$l_1$" src="form_35.png"/>) and the Manhattan distance</p>
<dl class="warning"><dt><b>Warning:</b></dt><dd>In <a class="el" href="structDGtal_1_1SeparableMetricTraits.html" title="Aim: Implements basic functions associated to metrics used by separable volumetric algorithms...">SeparableMetricTraits</a> the power "p" is a static number of type <a class="el" href="namespaceDGtal.html#a27c59126488e9c545120667959d2fc4e" title="unsigned 32-bit integer.">DGtal::uint32_t</a>. Hence, to specify a <img class="formulaInl" alt="$l_\infty$" src="form_36.png"/> metric, we use the value "0" for the template parameter "p" (and thus we forbid the use of <img class="formulaInl" alt="$l_0$" src="form_37.png"/> metric). It does not make sense in a mathematical point of view but it makes the code simpler.</dd></dl>
<h2><a class="anchor" id="refsvol"></a>
References</h2>
<p>G. Borgefors. Distance transformations in digital images. Computer Vision, Graphics, and Image Processing, 34(3):344–371, June 1986.</p>
<p>D. Coeurjolly and A. Montanvert. Optimal separable algorithms to compute the reverse euclidean distance transformation and discrete medial axis in arbitrary dimension. IEEE Transactions on Pattern Analysis and Machine Intelligence, 29(3):437–448, March 2007.</p>
<p>P.-E. Danielsson. Euclidean distance mapping. Computer Graphics and Image Processing, 14:227–248, 1980.</p>
<p>T. Hirata. A unified linear-time algorithm for computing distance maps. Information Processing Letters, 58(3):129–133, May 1996.</p>
<p>C.R.Maurer,R.Qi,andV.Raghavan.A linear time algorithm for computing exact euclidean distance transforms of binary images in arbitrary dimensions. IEEE Transactions on Pattern Analysis and Machine Intelligence, 25(2):265–270, February 2003.</p>
<p>J. C. Mullikin. The vector distance transform in two and three dimensions. Computer Vision, Graphics, and Image Processing. Graphical Models and Image Processing, 54(6):526–535, November 1992.</p>
<p>I. Ragnemalm. Contour processing distance transforms, pages 204–211. World Scientific, 1990.</p>
<p>A. Rosenfeld and J. L. Pfaltz. Sequential operations in digital picture processing. Journal of the ACM, 13(4):471–494, October 1966.</p>
<p>A. Rosenfeld and J. L. Pfalz. Distance functions on digital pictures. Pattern Recognition, 1:33–61, 1968.</p>
<p>T. Saito and J I Toriwaki. New algorithms for Euclidean distance transformations of an $n$- dimensional digitized picture with applications. Pattern Recognition, 27:1551–1565, 1994. </p>
</div></div>
<!--- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Friends</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<hr class="footer"/><address class="footer"><small>Generated on Tue Sep 27 2011 12:41:24 for DGtal by&#160;
<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.7.3 </small></address>
</body>
</html>
