<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.13"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>DGtal: geometry/curves/convex-and-concave-parts.cpp</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js", "TeX/AMSmath.js", "TeX/AMSsymbols.js"],
    jax: ["input/TeX","output/HTML-CSS"],
});
</script><script type="text/javascript" src="http://cdn.mathjax.org/mathjax/latest/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="modern-doxygen-blue.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">DGtal
   &#160;<span id="projectnumber">0.9.3</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.13 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">geometry/curves/convex-and-concave-parts.cpp</div>  </div>
</div><!--header-->
<div class="contents">
<p>This example outputs the cover of an open digital curve by maximal DSSs. Maximal DSSs are displayed in blue, green, yellow in convex, concave, inflexion parts respectively. Ends are black. Convex (resp. concave) parts are defined as sequences of maximal DSSs of increasing (resp. decreasing) slope.</p>
<pre class="fragment">$ ./examples/geometry/curves/convex-and-concave-parts
</pre><p>Note that the chain code of the input digital curve may be passed as argument as follows: </p><pre class="fragment">$ ./examples/geometry/curves/convex-and-concave-parts 0300303303033030303000010101011010110100000303303033030303
</pre><div class="image">
<img src="convex-and-concave-parts.png" alt="convex-and-concave-parts.png"/>
<div class="caption">
Decomposition into convex and concave parts</div></div>
<dl class="section see"><dt>See also</dt><dd><a class="el" href="moduleArithDSSReco.html">Digital straight lines and segments</a> and <a class="el" href="moduleGridCurveAnalysis.html">Analysis of one-dimensional discrete structures</a></dd></dl>
<div class="fragment"><div class="line"></div><div class="line"><span class="preprocessor">#include &lt;cmath&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;iostream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;sstream&gt;</span></div><div class="line"><span class="preprocessor">#include &lt;fstream&gt;</span></div><div class="line"><span class="preprocessor">#include &quot;DGtal/base/Common.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;DGtal/io/boards/Board2D.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;DGtal/io/Color.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;DGtal/shapes/Shapes.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;DGtal/helpers/StdDefs.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;DGtal/geometry/curves/ArithmeticalDSSComputer.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;DGtal/geometry/curves/FreemanChain.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;DGtal/geometry/curves/SaturatedSegmentation.h&quot;</span></div><div class="line"><span class="preprocessor">#include &quot;ConfigExamples.h&quot;</span></div><div class="line"></div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespacestd.html">std</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceDGtal.html">DGtal</a>;</div><div class="line"><span class="keyword">using namespace </span><a class="code" href="namespaceZ2i.html">Z2i</a>;</div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator, <span class="keyword">typename</span> Board&gt;</div><div class="line"><span class="keywordtype">void</span> <a name="a0"></a><a class="code" href="testSegmentation_8cpp.html#a6db8c21a056713ded5140aa28c9711ff">drawCCP</a>(<span class="keyword">const</span> Iterator&amp; itb, <span class="keyword">const</span> Iterator&amp; ite, Board&amp; aBoard)</div><div class="line">{</div><div class="line"></div><div class="line">  <span class="comment">//choose the drawing mode</span></div><div class="line">  aBoard &lt;&lt; <a name="_a1"></a><a class="code" href="structDGtal_1_1SetMode.html">SetMode</a>( <span class="stringliteral">&quot;ArithmeticalDSS&quot;</span>, <span class="stringliteral">&quot;BoundingBox&quot;</span> );</div><div class="line">  <span class="comment">//prepare the drawing style and the pen color</span></div><div class="line">  <span class="keywordtype">string</span> aStyleName = <span class="stringliteral">&quot;ArithmeticalDSS/BoundingBox&quot;</span>;</div><div class="line">  <a name="_a2"></a><a class="code" href="structDGtal_1_1CustomPenColor.html">CustomPenColor</a>* aPenColor;</div><div class="line"></div><div class="line">  <span class="comment">//for each maximal segment</span></div><div class="line">  <span class="keywordflow">for</span> (Iterator i(itb); i != ite; ++i) {</div><div class="line"></div><div class="line">    <span class="comment">//get the current maximal segment</span></div><div class="line">    <span class="keyword">typedef</span> <span class="keyword">typename</span> Iterator::SegmentComputer::Primitive DSS;</div><div class="line">    DSS maximalDSS = i-&gt;primitive();</div><div class="line"></div><div class="line">    <span class="comment">//if located at the end of a connected part</span></div><div class="line">    <span class="keywordflow">if</span> ( !(i.intersectNext() &amp;&amp; i.intersectPrevious()) ) {</div><div class="line"></div><div class="line">      aPenColor = <span class="keyword">new</span> <a class="code" href="structDGtal_1_1CustomPenColor.html">CustomPenColor</a>( Color::Black );</div><div class="line"></div><div class="line">      <span class="comment">//otherwise</span></div><div class="line">    } <span class="keywordflow">else</span> {</div><div class="line"></div><div class="line">      <span class="comment">//get the points located before and after the maximal segment</span></div><div class="line">      <span class="keyword">typedef</span> <span class="keyword">typename</span> <a name="a3"></a><a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">DSS::Point</a> <a class="code" href="testClone2_8cpp.html#a15e9592ccc512dc691b46185e6814758">Point</a>;</div><div class="line">      Point beforeFirst = *(--(i-&gt;begin()));</div><div class="line">      Point afterLast = *(i-&gt;end());</div><div class="line"></div><div class="line">      <span class="comment">//remainders and bounds</span></div><div class="line">      <span class="keyword">typedef</span> <span class="keyword">typename</span> DSS::Integer <a class="code" href="namespaceDGtal_1_1Z2i.html#a5d93c6632713d21e2662c93af3a941e6">Integer</a>;</div><div class="line">      Integer r1 = maximalDSS.remainder(beforeFirst);</div><div class="line">      Integer r2 = maximalDSS.remainder(afterLast);</div><div class="line">      Integer mu = maximalDSS.mu();</div><div class="line">      Integer omega = maximalDSS.omega();</div><div class="line"></div><div class="line">      <span class="comment">//configurations</span></div><div class="line">      <span class="keywordflow">if</span> ( (r1&lt;=mu-1)&amp;&amp;(r2&lt;=mu-1) ) {                    <span class="comment">//concave</span></div><div class="line">        aPenColor = <span class="keyword">new</span> <a class="code" href="structDGtal_1_1CustomPenColor.html">CustomPenColor</a>( Color::Green);</div><div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (r1&gt;=mu+omega)&amp;&amp;(r2&gt;=mu+omega) ) {     <span class="comment">//convex</span></div><div class="line">        aPenColor = <span class="keyword">new</span> <a class="code" href="structDGtal_1_1CustomPenColor.html">CustomPenColor</a>( Color::Blue );</div><div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (r1&gt;=mu+omega)&amp;&amp;(r2&lt;=mu-1) ) {         <span class="comment">//convex to concave</span></div><div class="line">        aPenColor = <span class="keyword">new</span> <a class="code" href="structDGtal_1_1CustomPenColor.html">CustomPenColor</a>( Color::Yellow );</div><div class="line">      } <span class="keywordflow">else</span> <span class="keywordflow">if</span> ( (r1&lt;=mu-1)&amp;&amp;(r2&gt;=mu+omega) ) {         <span class="comment">//concave to convex</span></div><div class="line">        aPenColor = <span class="keyword">new</span> <a class="code" href="structDGtal_1_1CustomPenColor.html">CustomPenColor</a>( Color::Yellow );</div><div class="line">      } <span class="keywordflow">else</span> {                                           <span class="comment">//pb</span></div><div class="line">        aPenColor = <span class="keyword">new</span> <a class="code" href="structDGtal_1_1CustomPenColor.html">CustomPenColor</a>( Color::Red );</div><div class="line">      }</div><div class="line"></div><div class="line">    }</div><div class="line"></div><div class="line">    <span class="comment">// draw the maximal segment on the board</span></div><div class="line">    aBoard &lt;&lt; <a name="_a4"></a><a class="code" href="structDGtal_1_1CustomStyle.html">CustomStyle</a>( aStyleName, aPenColor )</div><div class="line">           &lt;&lt; maximalDSS;</div><div class="line"></div><div class="line">  }</div><div class="line"></div><div class="line">}</div><div class="line"></div><div class="line"><span class="keyword">template</span> &lt;<span class="keyword">typename</span> Iterator, <span class="keyword">typename</span> Board&gt;</div><div class="line"><span class="keywordtype">void</span> <a name="a5"></a><a class="code" href="testSegmentation_8cpp.html#a0e45d4c95df5c45509343ccb8559fc03">segmentationIntoMaximalDSSs</a>(<span class="keyword">const</span> Iterator&amp; itb, <span class="keyword">const</span> Iterator&amp; ite,</div><div class="line">                                 Board&amp; aBoard)</div><div class="line">{</div><div class="line">  <span class="keyword">typedef</span> <span class="keyword">typename</span> <a name="_a6"></a><a class="code" href="structDGtal_1_1IteratorCirculatorTraits.html">IteratorCirculatorTraits&lt;Iterator&gt;::Value::Coordinate</a> Coordinate;</div><div class="line"></div><div class="line">  <span class="comment">//choose the primitive computer and the segmentation</span></div><div class="line">  <span class="keyword">typedef</span> <a name="_a7"></a><a class="code" href="classDGtal_1_1ArithmeticalDSSComputer.html">ArithmeticalDSSComputer&lt;Iterator,Coordinate,4&gt;</a> RecognitionAlgorithm;</div><div class="line">  <span class="keyword">typedef</span> <a name="_a8"></a><a class="code" href="classDGtal_1_1SaturatedSegmentation.html">SaturatedSegmentation&lt;RecognitionAlgorithm&gt;</a> Segmentation;</div><div class="line"></div><div class="line">  <span class="comment">//create the segmentation</span></div><div class="line">  RecognitionAlgorithm algo;</div><div class="line">  Segmentation s(itb,ite,algo);</div><div class="line"></div><div class="line">  <span class="comment">//draw the result</span></div><div class="line">  <a class="code" href="testSegmentation_8cpp.html#a6db8c21a056713ded5140aa28c9711ff">drawCCP</a>(s.begin(), s.end(), aBoard);</div><div class="line">}</div><div class="line"></div><div class="line"></div><div class="line"><span class="keywordtype">int</span> <a name="a9"></a><a class="code" href="testArithmeticDSS-benchmark_8cpp.html#a3c04138a5bfe5d72780bb7e82a18e627">main</a>( <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span>** argv )</div><div class="line">{</div><div class="line"></div><div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a name="a10"></a><a class="code" href="classDGtal_1_1Trace.html#a352b7160bf722e2f0bcbee5d0bad6ef3">beginBlock</a> ( <span class="stringliteral">&quot;Example convex-and-concave-parts&quot;</span> );</div><div class="line"></div><div class="line">  <a name="_a11"></a><a class="code" href="classDGtal_1_1Board2D.html">Board2D</a> aBoard; <span class="comment">//create a board</span></div><div class="line"></div><div class="line">  <span class="comment">//create a chain code</span></div><div class="line">  <span class="keywordtype">string</span> codes;</div><div class="line">  <span class="keywordflow">if</span> (argc &gt;= 2) codes = argv[1];</div><div class="line">  <span class="keywordflow">else</span> codes = <span class="stringliteral">&quot;030030330303303030300001010101101011010000030330303303030300001010110101011010000033&quot;</span>;</div><div class="line"></div><div class="line">  stringstream ss(stringstream::in | stringstream::out);</div><div class="line">  ss &lt;&lt; <span class="stringliteral">&quot;0 0 &quot;</span> &lt;&lt; codes &lt;&lt; endl;</div><div class="line">  <a name="_a12"></a><a class="code" href="classDGtal_1_1FreemanChain.html">FreemanChain&lt;int&gt;</a> theContour( ss );</div><div class="line"></div><div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a name="a13"></a><a class="code" href="classDGtal_1_1Trace.html#ad054990834d2763627166540087a2980">info</a>() &lt;&lt; <span class="stringliteral">&quot;Processing of &quot;</span> &lt;&lt; ss.str() &lt;&lt; endl;</div><div class="line"></div><div class="line">  <span class="comment">//draw the digital contour</span></div><div class="line">  aBoard</div><div class="line">   &lt;&lt; <a class="code" href="structDGtal_1_1SetMode.html">SetMode</a>( <span class="stringliteral">&quot;PointVector&quot;</span>, <span class="stringliteral">&quot;Grid&quot;</span> )</div><div class="line">   &lt;&lt; theContour;</div><div class="line"></div><div class="line">  <span class="comment">//draw the maximal segments</span></div><div class="line">  <a class="code" href="testSegmentation_8cpp.html#a0e45d4c95df5c45509343ccb8559fc03">segmentationIntoMaximalDSSs</a>(theContour.begin(), theContour.end(), aBoard);</div><div class="line"></div><div class="line">  <span class="comment">//save the drawing</span></div><div class="line">  aBoard.<a name="a14"></a><a class="code" href="classLibBoard_1_1Board.html#acc1b85905672ee7d51d8d427ef1f3f1b">saveSVG</a>(<span class="stringliteral">&quot;convex-and-concave-parts.svg&quot;</span>);</div><div class="line"><span class="preprocessor">  #ifdef WITH_CAIRO</span></div><div class="line">    aBoard.<a name="a15"></a><a class="code" href="classLibBoard_1_1Board.html#af43e6ef7c37394c490ebd2bc7722f1ed">saveCairo</a>(<span class="stringliteral">&quot;convex-and-concave-parts.png&quot;</span>); </div><div class="line"><span class="preprocessor">  #endif</span></div><div class="line"></div><div class="line">  <a class="code" href="namespaceDGtal.html#a8fc7012708b0416880a5c8b12dfdf9dd">trace</a>.<a name="a16"></a><a class="code" href="classDGtal_1_1Trace.html#afa3a2874289734884107b1ce68ccb93d">endBlock</a>();</div><div class="line"></div><div class="line">  <span class="keywordflow">return</span> 0;</div><div class="line">}</div><div class="line"><span class="comment">//                                                                           //</span></div></div><!-- fragment --> </div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated on Sun Feb 12 2017 10:24:42 for DGtal by &#160;<a href="http://www.doxygen.org/index.html">
<img class="footer" src="doxygen.png" alt="doxygen"/>
</a> 1.8.13
</small></address>
</body>
</html>
